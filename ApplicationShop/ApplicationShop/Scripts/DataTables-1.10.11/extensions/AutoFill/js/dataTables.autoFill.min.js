/*! AutoFill 2.1.1
 * ©2008-2015 SpryMedia Ltd - datatables.net/license
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery","datatables.net"],function(t){return n(t,window,document)}):typeof exports=="object"?module.exports=function(t,i){return t||(t=window),i&&i.fn.dataTable||(i=require("datatables.net")(t,i).$),n(i,t,t.document)}:n(jQuery,window,document)})(function(n,t,i,r){"use strict";var f=n.fn.dataTable,e=0,u=function(t,i){if(!f.versionCheck||!f.versionCheck("1.10.8"))throw"Warning: AutoFill requires DataTables 1.10.8 or greater";this.c=n.extend(!0,{},f.defaults.autoFill,u.defaults,i);this.s={dt:new f.Api(t),namespace:".autoFill"+e++,scroll:{},scrollInterval:null,handle:{height:0,width:0}};this.dom={handle:n('<div class="dt-autofill-handle"/>'),select:{top:n('<div class="dt-autofill-select top"/>'),right:n('<div class="dt-autofill-select right"/>'),bottom:n('<div class="dt-autofill-select bottom"/>'),left:n('<div class="dt-autofill-select left"/>')},background:n('<div class="dt-autofill-background"/>'),list:n('<div class="dt-autofill-list">'+this.s.dt.i18n("autoFill.info","")+"<ul/><\/div>"),dtScroll:null,offsetParent:null};this._constructor()};n.extend(u.prototype,{_constructor:function(){var r=this,u=this.s.dt,t=n("div.dataTables_scrollBody",this.s.dt.table().container());t.length&&(this.dom.dtScroll=t,t.css("position")==="static"&&t.css("position","relative"));this._focusListener();this.dom.handle.on("mousedown",function(n){return r._mousedown(n),!1});u.on("destroy.autoFill",function(){u.off(".autoFill");n(u.table().body()).off(r.s.namespace);n(i.body).off(r.s.namespace)})},_attach:function(t){var f=this.s.dt,e=f.cell(t).index(),r=this.dom.handle,i=this.s.handle,o=n("div.dataTables_scrollBody",this.s.dt.table().container()),u;if(!e||f.columns(this.c.columns).indexes().indexOf(e.column)===-1){this._detach();return}this.dom.offsetParent||(this.dom.offsetParent=n(t).offsetParent());i.height&&i.width||(r.appendTo("body"),i.height=r.outerHeight(),i.width=r.outerWidth());u=n(t).position();this.dom.attachedTo=t;r.css({top:u.top+t.offsetHeight-i.height+o.scrollTop(),left:u.left+t.offsetWidth-i.width+o.scrollLeft()}).appendTo(this.dom.offsetParent)},_actionSelector:function(t){var e=this,i=this.s.dt,f=u.actions,r=[],o,s;n.each(f,function(n,u){u.available(i,t)&&r.push(n)});r.length===1&&this.c.alwaysAsk===!1?(o=f[r[0]].execute(i,t),this._update(o,t)):(s=this.dom.list.children("ul").empty(),r.push("cancel"),n.each(r,function(r,o){s.append(n("<li/>").append('<div class="dt-autofill-question">'+f[o].option(i,t)+"<div>").append(n('<div class="dt-autofill-button">').append(n('<button class="'+u.classes.btn+'">'+i.i18n("autoFill.button","&gt;")+"<\/button>").on("click",function(){var r=f[o].execute(i,t,n(this).closest("li"));e._update(r,t);e.dom.background.remove();e.dom.list.remove()}))))}),this.dom.background.appendTo("body"),this.dom.list.appendTo("body"),this.dom.list.css("margin-top",this.dom.list.outerHeight()/-2))},_detach:function(){this.dom.attachedTo=null;this.dom.handle.detach()},_drawSelection:function(t){var a=this.s.dt,o=this.s.start,s=n(this.dom.start),u=n(t),f={row:a.rows({page:"current"}).nodes().indexOf(u.parent()[0]),column:u.index()},i,v,r,y,h,c,l,e;a.cell(u).any()&&a.columns(this.c.columns).indexes().indexOf(f.column)!==-1&&(this.s.end=f,i=o.row<f.row?s:u,v=o.row<f.row?u:s,r=o.column<f.column?s:u,y=o.column<f.column?u:s,i=i.position().top,r=r.position().left,h=v.position().top+v.outerHeight()-i,c=y.position().left+y.outerWidth()-r,l=this.dom.dtScroll,l&&(i+=l.scrollTop(),r+=l.scrollLeft()),e=this.dom.select,e.top.css({top:i,left:r,width:c}),e.left.css({top:i,left:r,height:h}),e.bottom.css({top:i+h,left:r,width:c}),e.right.css({top:i,left:r+c,height:h}))},_editor:function(n){var c=this.s.dt,u=this.c.editor,i,v,e,y,w,s,b,h,k;if(u){var f={},l=[],a=u.fields();for(i=0,v=n.length;i<v;i++)for(e=0,y=n[i].length;e<y;e++){var o=n[i][e],p=c.settings()[0].aoColumns[o.index.column],t=p.editField;if(t===r)for(w=p.mData,s=0,b=a.length;s<b;s++)if(h=u.field(a[s]),h.dataSrc()===w){t=h.name();break}if(!t)throw"Could not automatically determine field data. Please see https://datatables.net/tn/11";f[t]||(f[t]={});k=c.row(o.index.row).id();f[t][k]=o.set;l.push(o.index)}u.bubble(l,!1).multiSet(f).submit()}},_emitEvent:function(t,i){this.s.dt.iterator("table",function(r){n(r.nTable).triggerHandler(t+".dt",i)})},_focusListener:function(){var t=this,r=this.s.dt,u=this.s.namespace,f=this.c.focus!==null?this.c.focus:r.settings()[0].keytable?"focus":"hover";if(f==="focus")r.on("key-focus.autoFill",function(n,i,r){t._attach(r.node())}).on("key-blur.autoFill",function(){t._detach()});else if(f==="click"){n(r.table().body()).on("click"+u,"td, th",function(){t._attach(this)});n(i.body).on("click"+u,function(i){n(i.target).parents().filter(r.table().body()).length||t._detach()})}else n(r.table().body()).on("mouseenter"+u,"td, th",function(){t._attach(this)}).on("mouseleave"+u,function(i){n(i.relatedTarget).hasClass("dt-autofill-handle")||t._detach()})},_mousedown:function(r){var o=this,s=this.s.dt,f,e,u;this.dom.start=this.dom.attachedTo;this.s.start={row:s.rows({page:"current"}).nodes().indexOf(n(this.dom.start).parent()[0]),column:n(this.dom.start).index()};n(i.body).on("mousemove.autoFill",function(n){o._mousemove(n)}).on("mouseup.autoFill",function(n){o._mouseup(n)});f=this.dom.select;e=n(this.s.dt.table().body()).offsetParent();f.top.appendTo(e);f.left.appendTo(e);f.right.appendTo(e);f.bottom.appendTo(e);this._drawSelection(this.dom.start,r);this.dom.handle.css("display","none");u=this.dom.dtScroll;this.s.scroll={windowHeight:n(t).height(),windowWidth:n(t).width(),dtTop:u?u.offset().top:null,dtLeft:u?u.offset().left:null,dtHeight:u?u.outerHeight():null,dtWidth:u?u.outerWidth():null}},_mousemove:function(n){var i=this,r=this.s.dt,t=n.target.nodeName.toLowerCase();(t==="td"||t==="th")&&(this._drawSelection(n.target,n),this._shiftScroll(n))},_mouseup:function(){var e,t,u,f,o;if(n(i.body).off(".autoFill"),e=this.s.dt,t=this.dom.select,t.top.remove(),t.left.remove(),t.right.remove(),t.bottom.remove(),this.dom.handle.css("display","block"),u=this.s.start,f=this.s.end,u.row!==f.row||u.column!==f.column){var s=this._range(u.row,f.row),l=this._range(u.column,f.column),h=[],c=e.settings()[0],a=c.aoColumns;for(o=0;o<s.length;o++)h.push(n.map(l,function(n){var t=e.cell(":eq("+s[o]+")",n+":visible",{page:"current"}),u=t.data(),i=t.index(),f=a[i.column].editField;return f!==r&&(u=c.oApi._fnGetObjectDataFn(f)(e.row(i.row).data())),{cell:t,data:u,label:t.data(),index:i}}));this._actionSelector(h);clearInterval(this.s.scrollInterval);this.s.scrollInterval=null}},_range:function(n,t){var r=[],i;if(n<=t)for(i=n;i<=t;i++)r.push(i);else for(i=n;i>=t;i--)r.push(i);return r},_shiftScroll:function(n){var a=this,v=this.s.dt,t=this.s.scroll,h=!1,r=5,u=65,c=n.pageY-i.body.scrollTop,l=n.pageX-i.body.scrollLeft,f,e,o,s;c<u?f=r*-1:c>t.windowHeight-u&&(f=r);l<u?e=r*-1:l>t.windowWidth-u&&(e=r);t.dtTop!==null&&n.pageY<t.dtTop+u?o=r*-1:t.dtTop!==null&&n.pageY>t.dtTop+t.dtHeight-u&&(o=r);t.dtLeft!==null&&n.pageX<t.dtLeft+u?s=r*-1:t.dtLeft!==null&&n.pageX>t.dtLeft+t.dtWidth-u&&(s=r);f||e||o||s?(t.windowVert=f,t.windowHoriz=e,t.dtVert=o,t.dtHoriz=s,h=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null);!this.s.scrollInterval&&h&&(this.s.scrollInterval=setInterval(function(){if(t.windowVert&&(i.body.scrollTop+=t.windowVert),t.windowHoriz&&(i.body.scrollLeft+=t.windowHoriz),t.dtVert||t.dtHoriz){var n=a.dom.dtScroll[0];t.dtVert&&(n.scrollTop+=t.dtVert);t.dtHoriz&&(n.scrollLeft+=t.dtHoriz)}},20))},_update:function(n,t){var r,f,e,i,o,u,s;if(n!==!1){if(r=this.s.dt,this._emitEvent("preAutoFill",[r,t]),this._editor(t),e=this.c.update!==null?this.c.update:this.c.editor?!1:!0,e){for(i=0,o=t.length;i<o;i++)for(u=0,s=t[i].length;u<s;u++)f=t[i][u],f.cell.data(f.set);r.draw(!1)}this._emitEvent("autoFill",[r,t])}}});u.actions={increment:{available:function(t,i){return n.isNumeric(i[0][0].label)},option:function(n){return n.i18n("autoFill.increment",'Increment / decrement each cell by: <input type="number" value="1">')},execute:function(t,i,r){for(var f,o,e=i[0][0].data*1,s=n("input",r).val()*1,u=0,h=i.length;u<h;u++)for(f=0,o=i[u].length;f<o;f++)i[u][f].set=e,e+=s}},fill:{available:function(){return!0},option:function(n,t){return n.i18n("autoFill.fill","Fill all cells with <i>"+t[0][0].label+"<\/i>")},execute:function(n,t){for(var r,u,f=t[0][0].data,i=0,e=t.length;i<e;i++)for(r=0,u=t[i].length;r<u;r++)t[i][r].set=f}},fillHorizontal:{available:function(n,t){return t.length>1&&t[0].length>1},option:function(n){return n.i18n("autoFill.fillHorizontal","Fill cells horizontally")},execute:function(n,t){for(var r,f,i=0,u=t.length;i<u;i++)for(r=0,f=t[i].length;r<f;r++)t[i][r].set=t[i][0].data}},fillVertical:{available:function(n,t){return t.length>1&&t[0].length>1},option:function(n){return n.i18n("autoFill.fillVertical","Fill cells vertically")},execute:function(n,t){for(var r,f,i=0,u=t.length;i<u;i++)for(r=0,f=t[i].length;r<f;r++)t[i][r].set=t[0][r].data}},cancel:{available:function(){return!1},option:function(n){return n.i18n("autoFill.cancel","Cancel")},execute:function(){return!1}}};u.version="2.1.1";u.defaults={alwaysAsk:!1,focus:null,columns:"",update:null,editor:null};u.classes={btn:"btn"};n(i).on("preInit.dt.autofill",function(t,i){var r,e,o;t.namespace==="dt"&&(r=i.oInit.autoFill,e=f.defaults.autoFill,(r||e)&&(o=n.extend({},r,e),r!==!1&&new u(i,o)))});return f.AutoFill=u,f.AutoFill=u,u});
//# sourceMappingURL=dataTables.autoFill.min.js.map
