/*! Scroller 1.4.1
 * ©2011-2016 SpryMedia Ltd - datatables.net/license
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery","datatables.net"],function(t){return n(t,window,document)}):typeof exports=="object"?module.exports=function(t,i){return t||(t=window),i&&i.fn.dataTable||(i=require("datatables.net")(t,i).$),n(i,t,t.document)}:n(jQuery,window,document)})(function(n,t,i,r){"use strict";var e=n.fn.dataTable,u=function(t,f){if(!(this instanceof u)){alert("Scroller warning: Scroller must be initialised with the 'new' keyword.");return}(f===r&&(f={}),this.s={dt:n.fn.dataTable.Api(t).settings()[0],tableTop:0,tableBottom:0,redrawTop:0,redrawBottom:0,autoHeight:!0,viewportRows:0,stateTO:null,drawTO:null,heights:{jump:null,page:null,virtual:null,scroll:null,row:null,viewport:null},topRowFloat:0,scrollDrawDiff:null,loaderVisible:!1},this.s=n.extend(this.s,u.oDefaults,f),this.s.heights.row=this.s.rowHeight,this.dom={force:i.createElement("div"),scroller:null,table:null,loader:null},this.s.dt.oScroller)||(this.s.dt.oScroller=this,this._fnConstruct())},f;n.extend(u.prototype,{fnRowToPixels:function(n,t,i){var u,f;return i?u=this._domain("virtualToPhysical",n*this.s.heights.row):(f=n-this.s.baseRowTop,u=this.s.baseScrollTop+f*this.s.heights.row),t||t===r?parseInt(u,10):u},fnPixelsToRow:function(n,t,i){var f=n-this.s.baseScrollTop,u=i?this._domain("physicalToVirtual",n)/this.s.heights.row:f/this.s.heights.row+this.s.baseRowTop;return t||t===r?parseInt(u,10):u},fnScrollToRow:function(t,i){var e=this,f=!1,r=this.fnRowToPixels(t),o=(this.s.displayBuffer-1)/2*this.s.viewportRows,u=t-o;u<0&&(u=0);(r>this.s.redrawBottom||r<this.s.redrawTop)&&this.s.dt._iDisplayStart!==u&&(f=!0,r=this.fnRowToPixels(t,!1,!0));typeof i=="undefined"||i?(this.s.ani=f,n(this.dom.scroller).animate({scrollTop:r},function(){setTimeout(function(){e.s.ani=!1},25)})):n(this.dom.scroller).scrollTop(r)},fnMeasure:function(t){this.s.autoHeight&&this._fnCalcRowHeight();var i=this.s.heights;i.row&&(i.viewport=n(this.dom.scroller).height(),this.s.viewportRows=parseInt(i.viewport/i.row,10)+1,this.s.dt._iDisplayLength=this.s.viewportRows*this.s.displayBuffer);(t===r||t)&&this.s.dt.oInstance.fnDraw(!1)},fnPageInfo:function(){var r=this.s.dt,n=this.dom.scroller.scrollTop,t=r.fnRecordsDisplay(),i=Math.ceil(this.fnPixelsToRow(n+this.s.heights.viewport,!1,this.s.ani));return{start:Math.floor(this.fnPixelsToRow(n,!1,this.s.ani)),end:t<i?t-1:i-1}},_fnConstruct:function(){var i=this,r;if(!this.s.dt.oFeatures.bPaginate){this.s.dt.oApi._fnLog(this.s.dt,0,"Pagination must be enabled for Scroller");return}this.dom.force.style.position="relative";this.dom.force.style.top="0px";this.dom.force.style.left="0px";this.dom.force.style.width="1px";this.dom.scroller=n("div."+this.s.dt.oClasses.sScrollBody,this.s.dt.nTableWrapper)[0];this.dom.scroller.appendChild(this.dom.force);this.dom.scroller.style.position="relative";this.dom.table=n(">table",this.dom.scroller)[0];this.dom.table.style.position="absolute";this.dom.table.style.top="0px";this.dom.table.style.left="0px";n(this.s.dt.nTableWrapper).addClass("DTS");this.s.loadingIndicator&&(this.dom.loader=n('<div class="dataTables_processing DTS_Loading">'+this.s.dt.oLanguage.sLoadingRecords+"<\/div>").css("display","none"),n(this.dom.scroller.parentNode).css("position","relative").append(this.dom.loader));this.s.heights.row&&this.s.heights.row!="auto"&&(this.s.autoHeight=!1);this.fnMeasure(!1);this.s.ingnoreScroll=!0;this.s.stateSaveThrottle=this.s.dt.oApi._fnThrottle(function(){i.s.dt.oApi._fnSaveState(i.s.dt)},500);n(this.dom.scroller).on("scroll.DTS",function(){i._fnScroll.call(i)});n(this.dom.scroller).on("touchstart.DTS",function(){i._fnScroll.call(i)});this.s.dt.aoDrawCallback.push({fn:function(){i.s.dt.bInitialised&&i._fnDrawCallback.call(i)},sName:"Scroller"});n(t).on("resize.DTS",function(){i.fnMeasure(!1);i._fnInfo()});r=!0;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(n,t){r&&i.s.dt.oLoadedState?(t.iScroller=i.s.dt.oLoadedState.iScroller,t.iScrollerTopRow=i.s.dt.oLoadedState.iScrollerTopRow,r=!1):(t.iScroller=i.dom.scroller.scrollTop,t.iScrollerTopRow=i.s.topRowFloat)},"Scroller_State");this.s.dt.oLoadedState&&(this.s.topRowFloat=this.s.dt.oLoadedState.iScrollerTopRow||0);n(this.s.dt.nTable).one("init.dt",function(){i.fnMeasure()});this.s.dt.aoDestroyCallback.push({sName:"Scroller",fn:function(){n(t).off("resize.DTS");n(i.dom.scroller).off("touchstart.DTS scroll.DTS");n(i.s.dt.nTableWrapper).removeClass("DTS");n("div.DTS_Loading",i.dom.scroller.parentNode).remove();n(i.s.dt.nTable).off("init.dt");i.dom.table.style.position="";i.dom.table.style.top="";i.dom.table.style.left=""}})},_fnScroll:function(){var r=this,u=this.s.heights,i=this.dom.scroller.scrollTop,t,f,e;if(!this.s.skip&&!this.s.ingnoreScroll){if(this.s.dt.bFiltered||this.s.dt.bSorted){this.s.lastScrollTop=0;return}this._fnInfo();clearTimeout(this.s.stateTO);this.s.stateTO=setTimeout(function(){r.s.dt.oApi._fnSaveState(r.s.dt)},250);(i<this.s.redrawTop||i>this.s.redrawBottom)&&(f=Math.ceil((this.s.displayBuffer-1)/2*this.s.viewportRows),Math.abs(i-this.s.lastScrollTop)>u.viewport||this.s.ani?(t=parseInt(this._domain("physicalToVirtual",i)/u.row,10)-f,this.s.topRowFloat=this._domain("physicalToVirtual",i)/u.row):(t=this.fnPixelsToRow(i)-f,this.s.topRowFloat=this.fnPixelsToRow(i,!1)),t<=0?t=0:t+this.s.dt._iDisplayLength>this.s.dt.fnRecordsDisplay()?(t=this.s.dt.fnRecordsDisplay()-this.s.dt._iDisplayLength,t<0&&(t=0)):t%2!=0&&t++,t!=this.s.dt._iDisplayStart&&(this.s.tableTop=n(this.s.dt.nTable).offset().top,this.s.tableBottom=n(this.s.dt.nTable).height()+this.s.tableTop,e=function(){r.s.scrollDrawReq===null&&(r.s.scrollDrawReq=i);r.s.dt._iDisplayStart=t;r.s.dt.oApi._fnDraw(r.s.dt)},this.s.dt.oFeatures.bServerSide?(clearTimeout(this.s.drawTO),this.s.drawTO=setTimeout(e,this.s.serverWait)):e(),this.dom.loader&&!this.s.loaderVisible&&(this.dom.loader.css("display","block"),this.s.loaderVisible=!0)));this.s.lastScrollTop=i;this.s.stateSaveThrottle()}},_domain:function(n,t){var i=this.s.heights,u,r,f;return i.virtual===i.scroll?t:(r=(i.scroll-i.viewport)/2,f=(i.virtual-i.viewport)/2,u=f/(r*r),n==="virtualToPhysical")?t<f?Math.pow(t/u,.5):(t=f*2-t,t<0?i.scroll:r*2-Math.pow(t/u,.5)):n==="physicalToVirtual"?t<r?t*t*u:(t=r*2-t,t<0?i.virtual:f*2-t*t*u):void 0},_fnDrawCallback:function(){var t=this,r=this.s.heights,i=this.dom.scroller.scrollTop,l=i,a=i+r.viewport,h=n(this.s.dt.nTable).height(),u=this.s.dt._iDisplayStart,c=this.s.dt._iDisplayLength,e=this.s.dt.fnRecordsDisplay(),f,o,s;this.s.skip=!0;this._fnScrollForce();i=u===0?this.s.topRowFloat*r.row:u+c>=e?r.scroll-(e-this.s.topRowFloat)*r.row:this._domain("virtualToPhysical",this.s.topRowFloat*r.row);this.dom.scroller.scrollTop=i;this.s.baseScrollTop=i;this.s.baseRowTop=this.s.topRowFloat;f=i-(this.s.topRowFloat-u)*r.row;u===0?f=0:u+c>=e&&(f=r.scroll-h);this.dom.table.style.top=f+"px";this.s.tableTop=f;this.s.tableBottom=h+this.s.tableTop;o=(i-this.s.tableTop)*this.s.boundaryScale;this.s.redrawTop=i-o;this.s.redrawBottom=i+o;this.s.skip=!1;this.s.dt.oFeatures.bStateSave&&this.s.dt.oLoadedState!==null&&typeof this.s.dt.oLoadedState.iScroller!="undefined"?(s=(this.s.dt.sAjaxSource||t.s.dt.ajax)&&!this.s.dt.oFeatures.bServerSide?!0:!1,(s&&this.s.dt.iDraw==2||!s&&this.s.dt.iDraw==1)&&setTimeout(function(){n(t.dom.scroller).scrollTop(t.s.dt.oLoadedState.iScroller);t.s.redrawTop=t.s.dt.oLoadedState.iScroller-r.viewport/2;setTimeout(function(){t.s.ingnoreScroll=!1},0)},0)):t.s.ingnoreScroll=!1;this.s.dt.oFeatures.bInfo&&setTimeout(function(){t._fnInfo.call(t)},0);this.dom.loader&&this.s.loaderVisible&&(this.dom.loader.css("display","none"),this.s.loaderVisible=!1)},_fnScrollForce:function(){var n=this.s.heights,t=1e6;n.virtual=n.row*this.s.dt.fnRecordsDisplay();n.scroll=n.virtual;n.scroll>t&&(n.scroll=t);this.dom.force.style.height=n.scroll>this.s.heights.row?n.scroll+"px":this.s.heights.row+"px"},_fnCalcRowHeight:function(){var t=this.s.dt,u=t.nTable,e=u.cloneNode(!1),i=n("<tbody/>").appendTo(e),f=n('<div class="'+t.oClasses.sWrapper+' DTS"><div class="'+t.oClasses.sScrollWrapper+'"><div class="'+t.oClasses.sScrollBody+'"><\/div><\/div><\/div>'),r;for(n("tbody tr:lt(4)",u).clone().appendTo(i);n("tr",i).length<3;)i.append("<tr><td>&nbsp;<\/td><\/tr>");n("div."+t.oClasses.sScrollBody,f).append(e);r=this.s.dt.nHolding||u.parentNode;n(r).is(":visible")||(r="body");f.appendTo(r);this.s.heights.row=n("tr",i).eq(1).outerHeight();f.remove()},_fnInfo:function(){var s,f,e,b;if(this.s.dt.oFeatures.bInfo){var t=this.s.dt,i=t.oLanguage,h=this.dom.scroller.scrollTop,c=Math.floor(this.fnPixelsToRow(h,!1,this.s.ani)+1),l=t.fnRecordsTotal(),r=t.fnRecordsDisplay(),a=Math.ceil(this.fnPixelsToRow(h+this.s.heights.viewport,!1,this.s.ani)),v=r<a?r:a,y=t.fnFormatNumber(c),p=t.fnFormatNumber(v),o=t.fnFormatNumber(l),w=t.fnFormatNumber(r),u;if(u=t.fnRecordsDisplay()===0&&t.fnRecordsDisplay()==t.fnRecordsTotal()?i.sInfoEmpty+i.sInfoPostFix:t.fnRecordsDisplay()===0?i.sInfoEmpty+" "+i.sInfoFiltered.replace("_MAX_",o)+i.sInfoPostFix:t.fnRecordsDisplay()==t.fnRecordsTotal()?i.sInfo.replace("_START_",y).replace("_END_",p).replace("_MAX_",o).replace("_TOTAL_",w)+i.sInfoPostFix:i.sInfo.replace("_START_",y).replace("_END_",p).replace("_MAX_",o).replace("_TOTAL_",w)+" "+i.sInfoFiltered.replace("_MAX_",t.fnFormatNumber(t.fnRecordsTotal()))+i.sInfoPostFix,s=i.fnInfoCallback,s&&(u=s.call(t.oInstance,t,c,v,l,r,u)),f=t.aanFeatures.i,typeof f!="undefined")for(e=0,b=f.length;e<b;e++)n(f[e]).html(u)}}});u.defaults={trace:!1,rowHeight:"auto",serverWait:200,displayBuffer:9,boundaryScale:.5,loadingIndicator:!1};u.oDefaults=u.defaults;u.version="1.4.1";typeof n.fn.dataTable=="function"&&typeof n.fn.dataTableExt.fnVersionCheck=="function"&&n.fn.dataTableExt.fnVersionCheck("1.10.0")?n.fn.dataTableExt.aoFeatures.push({fnInit:function(n){var t=n.oInit,i=t.scroller||t.oScroller||{};new u(n,i)},cFeature:"S",sFeature:"Scroller"}):alert("Warning: Scroller requires DataTables 1.10.0 or greater - www.datatables.net/download");n(i).on("preInit.dt.dtscroller",function(t,i){var r,f,o;t.namespace==="dt"&&(r=i.oInit.scroller,f=e.defaults.scroller,(r||f)&&(o=n.extend({},r,f),r!==!1&&new u(i,o)))});return n.fn.dataTable.Scroller=u,n.fn.DataTable.Scroller=u,f=n.fn.dataTable.Api,f.register("scroller()",function(){return this}),f.register("scroller().rowToPixels()",function(n,t,i){var r=this.context;if(r.length&&r[0].oScroller)return r[0].oScroller.fnRowToPixels(n,t,i)}),f.register("scroller().pixelsToRow()",function(n,t,i){var r=this.context;if(r.length&&r[0].oScroller)return r[0].oScroller.fnPixelsToRow(n,t,i)}),f.register("scroller().scrollToRow()",function(n,t){return this.iterator("table",function(i){i.oScroller&&i.oScroller.fnScrollToRow(n,t)}),this}),f.register("row().scrollTo()",function(n){var t=this;return this.iterator("row",function(i,r){if(i.oScroller){var u=t.rows({order:"applied",search:"applied"}).indexes().indexOf(r);i.oScroller.fnScrollToRow(u,n)}}),this}),f.register("scroller.measure()",function(n){return this.iterator("table",function(t){t.oScroller&&t.oScroller.fnMeasure(n)}),this}),f.register("scroller.page()",function(){var n=this.context;if(n.length&&n[0].oScroller)return n[0].oScroller.fnPageInfo()}),u});
//# sourceMappingURL=dataTables.scroller.min.js.map
