(function(n){typeof define=="function"&&define.amd?define(["inputmask.dependencyLib","inputmask"],n):typeof exports=="object"?module.exports=n(require("./inputmask.dependencyLib"),require("./inputmask")):n(window.dependencyLib||jQuery,window.Inputmask)})(function(n,t){return t.extendAliases({numeric:{mask:function(n){function f(t){for(var r="",i=0;i<t.length;i++)r+=n.definitions[t.charAt(i)]||n.optionalmarker.start===t.charAt(i)||n.optionalmarker.end===t.charAt(i)||n.quantifiermarker.start===t.charAt(i)||n.quantifiermarker.end===t.charAt(i)||n.groupmarker.start===t.charAt(i)||n.groupmarker.end===t.charAt(i)||n.alternatormarker===t.charAt(i)?"\\"+t.charAt(i):t.charAt(i);return r}var u,e,i,r;return n.repeat!==0&&isNaN(n.integerDigits)&&(n.integerDigits=n.repeat),n.repeat=0,n.groupSeparator===n.radixPoint&&(n.groupSeparator=n.radixPoint==="."?",":n.radixPoint===","?".":""),n.groupSeparator===" "&&(n.skipOptionalPartCharacter=undefined),n.autoGroup=n.autoGroup&&n.groupSeparator!=="",n.autoGroup&&(typeof n.groupSize=="string"&&isFinite(n.groupSize)&&(n.groupSize=parseInt(n.groupSize)),isFinite(n.integerDigits)&&(u=Math.floor(n.integerDigits/n.groupSize),e=n.integerDigits%n.groupSize,n.integerDigits=parseInt(n.integerDigits)+(e===0?u-1:u),n.integerDigits<1&&(n.integerDigits="*"))),n.placeholder.length>1&&(n.placeholder=n.placeholder.charAt(0)),n.positionCaretOnClick==="radixFocus"&&n.placeholder===""&&n.integerOptional===!1&&(n.positionCaretOnClick="lvp"),n.definitions[";"]=n.definitions["~"],n.definitions[";"].definitionSymbol="~",n.numericInput===!0&&(n.positionCaretOnClick=n.positionCaretOnClick==="radixFocus"?"lvp":n.positionCaretOnClick,n.digitsOptional=!1,isNaN(n.digits)&&(n.digits=2),n.decimalProtect=!1),i="[+]",i+=f(n.prefix),i+=n.integerOptional===!0?"~{1,"+n.integerDigits+"}":"~{"+n.integerDigits+"}",n.digits!==undefined&&(n.radixPointDefinitionSymbol=n.decimalProtect?":":n.radixPoint,r=n.digits.toString().split(","),isFinite(r[0]&&r[1]&&isFinite(r[1]))?i+=n.radixPointDefinitionSymbol+";{"+n.digits+"}":(isNaN(n.digits)||parseInt(n.digits)>0)&&(i+=n.digitsOptional?"["+n.radixPointDefinitionSymbol+";{1,"+n.digits+"}]":n.radixPointDefinitionSymbol+";{"+n.digits+"}")),i+=f(n.suffix),i+="[-]",n.greedy=!1,n.min!==null&&(n.min=n.min.toString().replace(new RegExp(t.escapeRegex(n.groupSeparator),"g"),""),n.radixPoint===","&&(n.min=n.min.replace(n.radixPoint,"."))),n.max!==null&&(n.max=n.max.toString().replace(new RegExp(t.escapeRegex(n.groupSeparator),"g"),""),n.radixPoint===","&&(n.max=n.max.replace(n.radixPoint,"."))),i},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,radixPoint:".",positionCaretOnClick:"radixFocus",groupSize:3,groupSeparator:"",autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",integerOptional:!0,prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:null,max:null,step:1,insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,inputmode:"numeric",postFormat:function(i,r,u){var c,y,h,o,s,f,p,w,l,a,v,e;if(u.numericInput===!0&&(i=i.reverse(),isFinite(r)&&(r=i.join("").length-r-1)),r=r>=i.length?i.length-1:r<0?0:r,h=i[r],o=i.slice(),h===u.groupSeparator&&r>u.prefix.length&&r<i.length-u.suffix.length&&(o.splice(r--,1),h=o[r]),s=o.join("").match(new RegExp("^"+t.escapeRegex(u.negationSymbol.front))),s=s!==null&&s.length===1,r>(s?u.negationSymbol.front.length:0)+u.prefix.length&&r<o.length-u.suffix.length&&(o[r]="!"),f=o.join(""),p=o.join(),s&&(f=f.replace(new RegExp("^"+t.escapeRegex(u.negationSymbol.front)),""),f=f.replace(new RegExp(t.escapeRegex(u.negationSymbol.back)+"$"),"")),f=f.replace(new RegExp(t.escapeRegex(u.suffix)+"$"),""),f=f.replace(new RegExp("^"+t.escapeRegex(u.prefix)),""),f.length>0&&u.autoGroup||f.indexOf(u.groupSeparator)!==-1){if(w=t.escapeRegex(u.groupSeparator),f=f.replace(new RegExp(w,"g"),""),l=f.split(h===u.radixPoint?"!":u.radixPoint),f=u.radixPoint===""?f:l[0],h!==u.negationSymbol.front&&(f=f.replace("!","?")),f.length>u.groupSize)for(a=new RegExp("([-+]?[\\d?]+)([\\d?]{"+u.groupSize+"})");a.test(f)&&u.groupSeparator!=="";)f=f.replace(a,"$1"+u.groupSeparator+"$2"),f=f.replace(u.groupSeparator+u.groupSeparator,u.groupSeparator);f=f.replace("?","!");u.radixPoint!==""&&l.length>1&&(f+=(h===u.radixPoint?"!":u.radixPoint)+l[1])}if(f=u.prefix+f+u.suffix,s&&(f=u.negationSymbol.front+f+u.negationSymbol.back),v=p!==f.split("").join(),e=n.inArray("!",f),e===-1&&(e=r),v){for(i.length=f.length,c=0,y=f.length;c<y;c++)i[c]=f.charAt(c);i[e]=h}return e=u.numericInput&&isFinite(r)?i.join("").length-e-1:e,u.numericInput&&(i=i.reverse(),n.inArray(u.radixPoint,i)<e&&i.join("").length-u.suffix.length!==e&&(e=e-1)),{pos:e,refreshFromBuffer:v,buffer:i,isNegative:s}},onBeforeWrite:function(i,r,u,f){var o,a,e,h,c,y,l,v,s;if(i&&(i.type==="blur"||i.type==="checkval"||i.type==="keydown")&&(a=f.numericInput?r.slice().reverse().join(""):r.join(""),e=a.replace(f.prefix,""),e=e.replace(f.suffix,""),e=e.replace(new RegExp(t.escapeRegex(f.groupSeparator),"g"),""),f.radixPoint===","&&(e=e.replace(f.radixPoint,".")),h=e.match(new RegExp("[-"+t.escapeRegex(f.negationSymbol.front)+"]","g")),h=h!==null&&h.length===1,e=e.replace(new RegExp("[-"+t.escapeRegex(f.negationSymbol.front)+"]","g"),""),e=e.replace(new RegExp(t.escapeRegex(f.negationSymbol.back)+"$"),""),isNaN(f.placeholder)&&(e=e.replace(new RegExp(t.escapeRegex(f.placeholder),"g"),"")),e=e===f.negationSymbol.front?e+"0":e,e!==""&&isFinite(e))){if(c=parseFloat(e),y=h?c*-1:c,i.type==="blur"&&(f.min!==null&&isFinite(f.min)&&y<parseFloat(f.min)?(c=Math.abs(f.min),h=f.min<0,a=undefined):f.max!==null&&isFinite(f.max)&&y>parseFloat(f.max)&&(c=Math.abs(f.max),h=f.max<0,a=undefined)),e=c.toString().replace(".",f.radixPoint).split(""),isFinite(f.digits)){for(l=n.inArray(f.radixPoint,e),v=n.inArray(f.radixPoint,a),l===-1&&(e.push(f.radixPoint),l=e.length-1),s=1;s<=f.digits;s++)f.digitsOptional||e[l+s]!==undefined&&e[l+s]!==f.placeholder.charAt(0)?v!==-1&&a[v+s]!==undefined&&(e[l+s]=e[l+s]||a[v+s]):e[l+s]="0";e[e.length-1]===f.radixPoint&&delete e[e.length-1]}if(c.toString()!==e&&c.toString()+"."!==e||h)return e=(f.prefix+e.join("")).split(""),h&&(c!==0||i.type!=="blur")&&(e.unshift(f.negationSymbol.front),e.push(f.negationSymbol.back)),f.numericInput&&(e=e.reverse()),o=f.postFormat(e,f.numericInput?u:u-1,f),o.buffer&&(o.refreshFromBuffer=o.buffer.join("")!==r.join("")),o}if(f.autoGroup)return o=f.postFormat(r,f.numericInput?u:u-1,f),o.caret=u<(o.isNegative?f.negationSymbol.front.length:0)+f.prefix.length||u>o.buffer.length-(o.isNegative?f.negationSymbol.back.length:0)?o.pos:o.pos+1,o},regex:{integerPart:function(n){return new RegExp("["+t.escapeRegex(n.negationSymbol.front)+"+]?\\d+")},integerNPart:function(n){return new RegExp("[\\d"+t.escapeRegex(n.groupSeparator)+t.escapeRegex(n.placeholder.charAt(0))+"]+")}},signHandler:function(n,t,i,r,u){if(!r&&u.allowMinus&&n==="-"||u.allowPlus&&n==="+"){var f=t.buffer.join("").match(u.regex.integerPart(u));if(f&&f[0].length>0)return t.buffer[f.index]===(n==="-"?"+":u.negationSymbol.front)?n==="-"?u.negationSymbol.back!==""?{pos:0,c:u.negationSymbol.front,remove:0,caret:i,insert:{pos:t.buffer.length-1,c:u.negationSymbol.back}}:{pos:0,c:u.negationSymbol.front,remove:0,caret:i}:u.negationSymbol.back!==""?{pos:0,c:"+",remove:[0,t.buffer.length-1],caret:i}:{pos:0,c:"+",remove:0,caret:i}:t.buffer[0]===(n==="-"?u.negationSymbol.front:"+")?n==="-"&&u.negationSymbol.back!==""?{remove:[0,t.buffer.length-1],caret:i-1}:{remove:0,caret:i-1}:n==="-"?u.negationSymbol.back!==""?{pos:0,c:u.negationSymbol.front,caret:i+1,insert:{pos:t.buffer.length,c:u.negationSymbol.back}}:{pos:0,c:u.negationSymbol.front,caret:i+1}:{pos:0,c:n,caret:i+1}}return!1},radixHandler:function(t,i,r,u,f){if(!u&&f.numericInput!==!0&&t===f.radixPoint&&f.digits!==undefined&&(isNaN(f.digits)||parseInt(f.digits)>0)){var o=n.inArray(f.radixPoint,i.buffer),e=i.buffer.join("").match(f.regex.integerPart(f));if(o!==-1&&i.validPositions[o])return i.validPositions[o-1]?{caret:o+1}:{pos:e.index,c:e[0],caret:o+1};if(!e||e["0"]==="0"&&e.index+1!==r)return i.buffer[e?e.index:r]="0",{pos:(e?e.index:r)+1,c:f.radixPoint}}return!1},leadingZeroHandler:function(t,i,r,u,f,e){var a,s,h,o,c,l;if(!u&&(a=r,s=f.numericInput===!0?i.buffer.slice("").reverse():i.buffer.slice(""),f.numericInput&&(r=s.join("").length-r-1),s.splice(0,f.prefix.length),s.splice(s.length-f.suffix.length,f.suffix.length),r=r-f.prefix.length,h=n.inArray(f.radixPoint,s),o=s.slice(0,h!==-1?h:undefined).join("").match(f.regex.integerNPart(f)),o&&(h===-1||r<=h||f.numericInput)))if(c=h===-1?0:parseInt(s.slice(h+1).join("")),l=o["0"].indexOf(f.placeholder!==""?f.placeholder.charAt(0):"0")===0,f.numericInput){if(l&&c!==0&&e!==!0)return i.buffer.splice(s.length-o.index-1+f.suffix.length,1),{pos:a,remove:s.length-o.index-1+f.suffix.length}}else{if(l&&(o.index+1===r||e!==!0&&c===0))return i.buffer.splice(o.index+f.prefix.length,1),{pos:o.index+f.prefix.length,remove:o.index+f.prefix.length};if(t==="0"&&r<=o.index&&o["0"]!==f.groupSeparator)return!1}return!0},definitions:{"~":{validator:function(i,r,u,f,e,o){var s=e.signHandler(i,r,u,f,e),h;return s||(s=e.radixHandler(i,r,u,f,e),s||(s=f?new RegExp("[0-9"+t.escapeRegex(e.groupSeparator)+"]").test(i):new RegExp("[0-9]").test(i),s===!0&&(s=e.leadingZeroHandler(i,r,u,f,e,o),s===!0&&e.numericInput!==!0&&(h=n.inArray(e.radixPoint,r.buffer),s=h!==-1&&(e.digitsOptional===!1||r.validPositions[u])&&e.numericInput!==!0&&u>h&&!f?{pos:u,remove:u}:{pos:u})))),s},cardinality:1},"+":{validator:function(n,t,i,r,u){var f=u.signHandler(n,t,i,r,u);return!f&&(r&&u.allowMinus&&n===u.negationSymbol.front||u.allowMinus&&n==="-"||u.allowPlus&&n==="+")&&(f=r||n!=="-"?!0:u.negationSymbol.back!==""?{pos:i,c:n==="-"?u.negationSymbol.front:"+",caret:i+1,insert:{pos:t.buffer.length,c:u.negationSymbol.back}}:{pos:i,c:n==="-"?u.negationSymbol.front:"+",caret:i+1}),f},cardinality:1,placeholder:""},"-":{validator:function(n,t,i,r,u){var f=u.signHandler(n,t,i,r,u);return!f&&r&&u.allowMinus&&n===u.negationSymbol.back&&(f=!0),f},cardinality:1,placeholder:""},":":{validator:function(n,i,r,u,f){var e=f.signHandler(n,i,r,u,f),o;return e||(o="["+t.escapeRegex(f.radixPoint)+"]",e=new RegExp(o).test(n),e&&i.validPositions[r]&&i.validPositions[r].match.placeholder===f.radixPoint&&(e={caret:r+1})),e},cardinality:1,placeholder:function(n){return n.radixPoint}}},onUnMask:function(n,i,r){if(i===""&&r.nullable===!0)return i;var u=n.replace(r.prefix,"");return(u=u.replace(r.suffix,""),u=u.replace(new RegExp(t.escapeRegex(r.groupSeparator),"g"),""),r.unmaskAsNumber)?(r.radixPoint!==""&&u.indexOf(r.radixPoint)!==-1&&(u=u.replace(t.escapeRegex.call(this,r.radixPoint),".")),Number(u)):u},isComplete:function(n,i){var u=n.join(""),f=n.slice(),r;return(i.postFormat(f,0,i),f.join("")!==u)?!1:(r=u.replace(i.prefix,""),r=r.replace(i.suffix,""),r=r.replace(new RegExp(t.escapeRegex(i.groupSeparator),"g"),""),i.radixPoint===","&&(r=r.replace(t.escapeRegex(i.radixPoint),".")),isFinite(r))},onBeforeMask:function(n,i){var r,e,u,f,s,h,o;return n=n.toString(),i.numericInput===!0&&(n=n.split("").reverse().join("")),i.radixPoint!==""&&isFinite(n)&&(r=n.split("."),e=i.groupSeparator!==""?parseInt(i.groupSize):0,r.length===2&&(r[0].length>e||r[1].length>e)&&(n=n.replace(".",i.radixPoint))),u=n.match(/,/g),f=n.match(/\./g),f&&u?f.length>u.length?(n=n.replace(/\./g,""),n=n.replace(",",i.radixPoint)):u.length>f.length?(n=n.replace(/,/g,""),n=n.replace(".",i.radixPoint)):n=n.indexOf(".")<n.indexOf(",")?n.replace(/\./g,""):n=n.replace(/,/g,""):n=n.replace(new RegExp(t.escapeRegex(i.groupSeparator),"g"),""),i.digits===0&&(n.indexOf(".")!==-1?n=n.substring(0,n.indexOf(".")):n.indexOf(",")!==-1&&(n=n.substring(0,n.indexOf(",")))),i.radixPoint!==""&&isFinite(i.digits)&&n.indexOf(i.radixPoint)!==-1&&(s=n.split(i.radixPoint),h=s[1].match(new RegExp("\\d*"))[0],parseInt(i.digits)<h.toString().length&&(o=Math.pow(10,parseInt(i.digits)),n=n.replace(t.escapeRegex(i.radixPoint),"."),n=Math.round(parseFloat(n)*o)/o,n=n.toString().replace(".",i.radixPoint))),i.numericInput===!0&&(n=n.split("").reverse().join("")),n},canClearPosition:function(n,t,i,r,u){var f=n.validPositions[t].input;return f!==u.radixPoint||n.validPositions[t].match.fn!==null&&u.decimalProtect===!1||isFinite(f)||t===i||f===u.groupSeparator||f===u.negationSymbol.front||f===u.negationSymbol.back},onKeyDown:function(i,r,u,f){var e=n(this);if(i.ctrlKey)switch(i.keyCode){case t.keyCode.UP:e.val(parseFloat(this.inputmask.unmaskedvalue())+parseInt(f.step));e.trigger("setvalue");break;case t.keyCode.DOWN:e.val(parseFloat(this.inputmask.unmaskedvalue())-parseInt(f.step));e.trigger("setvalue")}}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:0,radixPoint:""},percentage:{alias:"numeric",digits:2,radixPoint:".",placeholder:"0",autoGroup:!1,min:0,max:100,suffix:" %",allowPlus:!1,allowMinus:!1}}),t});