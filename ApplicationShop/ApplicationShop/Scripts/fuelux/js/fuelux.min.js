/*!
 * Fuel UX v3.15.4 
 * Copyright 2012-2016 ExactTarget
 * Licensed under the BSD-3-Clause license (https://github.com/ExactTarget/fuelux/blob/master/LICENSE)
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery","bootstrap"],n):n(jQuery)})(function(n){if(typeof n=="undefined")throw new Error("Fuel UX's JavaScript requires jQuery");if(typeof n.fn.dropdown=="undefined"||typeof n.fn.collapse=="undefined")throw new Error("Fuel UX's JavaScript requires Bootstrap");(function(n){var i=n.fn.checkbox,t=function(t,i){if(this.options=n.extend({},n.fn.checkbox.defaults,i),t.tagName.toLowerCase()==="label"){this.$label=n(t);this.$chk=this.$label.find('input[type="checkbox"]');this.$container=n(t).parent(".checkbox");var r=this.$chk.attr("data-toggle");this.$toggleContainer=n(r);this.$chk.on("change",n.proxy(this.itemchecked,this));this.setInitialState()}};t.prototype={constructor:t,setInitialState:function(){var n=this.$chk,r=this.$label,t=n.prop("checked"),i=n.prop("disabled");this.setCheckedState(n,t);this.setDisabledState(n,i)},setCheckedState:function(n,t){var r=n,i=this.$label,f=this.$container,u=this.$toggleContainer;t?(r.prop("checked",!0),i.addClass("checked"),u.removeClass("hide hidden"),i.trigger("checked.fu.checkbox")):(r.prop("checked",!1),i.removeClass("checked"),u.addClass("hidden"),i.trigger("unchecked.fu.checkbox"));i.trigger("changed.fu.checkbox",t)},setDisabledState:function(n,t){var r=n,i=this.$label;t?(this.$chk.prop("disabled",!0),i.addClass("disabled"),i.trigger("disabled.fu.checkbox")):(this.$chk.prop("disabled",!1),i.removeClass("disabled"),i.trigger("enabled.fu.checkbox"))},itemchecked:function(t){var i=n(t.target),r=i.prop("checked");this.setCheckedState(i,r)},toggle:function(){var n=this.isChecked();n?this.uncheck():this.check()},check:function(){this.setCheckedState(this.$chk,!0)},uncheck:function(){this.setCheckedState(this.$chk,!1)},isChecked:function(){return this.$chk.prop("checked")},enable:function(){this.setDisabledState(this.$chk,!1)},disable:function(){this.setDisabledState(this.$chk,!0)},destroy:function(){return this.$label.remove(),this.$label[0].outerHTML}};t.prototype.getValue=t.prototype.isChecked;n.fn.checkbox=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.checkbox"),o=typeof i=="object"&&i;f||e.data("fu.checkbox",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.checkbox.defaults={};n.fn.checkbox.Constructor=t;n.fn.checkbox.noConflict=function(){return n.fn.checkbox=i,this};n(document).on("mouseover.fu.checkbox.data-api","[data-initialize=checkbox]",function(t){var i=n(t.target);i.data("fu.checkbox")||i.checkbox(i.data())});n(function(){n("[data-initialize=checkbox]").each(function(){var t=n(this);t.data("fu.checkbox")||t.checkbox(t.data())})})})(n),function(n){var i=n.fn.combobox,t=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.combobox.defaults,i);this.$dropMenu=this.$element.find(".dropdown-menu");this.$input=this.$element.find("input");this.$button=this.$element.find(".btn");this.$inputGroupBtn=this.$element.find(".input-group-btn");this.$element.on("click.fu.combobox","a",n.proxy(this.itemclicked,this));this.$element.on("change.fu.combobox","input",n.proxy(this.inputchanged,this));this.$element.on("shown.bs.dropdown",n.proxy(this.menuShown,this));this.$input.on("keyup.fu.combobox",n.proxy(this.keypress,this));this.setDefaultSelection();var r=this.$dropMenu.children("li");r.length===0&&this.$button.addClass("disabled");this.options.filterOnKeypress&&this.options.filter(this.$dropMenu.find("li"),this.$input.val(),this)};t.prototype={constructor:t,destroy:function(){return this.$element.remove(),this.$element.find("input").each(function(){n(this).attr("value",n(this).val())}),this.$element[0].outerHTML},doSelect:function(n){typeof n[0]!="undefined"?(this.$element.find("li.selected:first").removeClass("selected"),this.$selectedItem=n,this.$selectedItem.addClass("selected"),this.$input.val(this.$selectedItem.text().trim())):(this.$selectedItem=null,this.$element.find("li.selected:first").removeClass("selected"))},clearSelection:function(){this.$selectedItem=null;this.$input.val("");this.$dropMenu.find("li").removeClass("selected")},menuShown:function(){this.options.autoResizeMenu&&this.resizeMenu()},resizeMenu:function(){var n=this.$element.outerWidth();this.$dropMenu.outerWidth(n)},selectedItem:function(){var r=this.$selectedItem,t={},i;return r?(i=this.$selectedItem.text().trim(),t=n.extend({text:i},this.$selectedItem.data())):t={text:this.$input.val().trim(),notFound:!0},t},selectByText:function(t){var i=n([]);this.$element.find("li").each(function(){if((this.textContent||this.innerText||n(this).text()||"").trim().toLowerCase()===(t||"").trim().toLowerCase())return i=n(this),!1});this.doSelect(i)},selectByValue:function(n){var t='li[data-value="'+n+'"]';this.selectBySelector(t)},selectByIndex:function(n){var t="li:eq("+n+")";this.selectBySelector(t)},selectBySelector:function(n){var t=this.$element.find(n);this.doSelect(t)},setDefaultSelection:function(){var t="li[data-selected=true]:first",n=this.$element.find(t);n.length>0&&(this.selectBySelector(t),n.removeData("selected"),n.removeAttr("data-selected"))},enable:function(){this.$element.removeClass("disabled");this.$input.removeAttr("disabled");this.$button.removeClass("disabled")},disable:function(){this.$element.addClass("disabled");this.$input.attr("disabled",!0);this.$button.addClass("disabled")},itemclicked:function(t){this.$selectedItem=n(t.target).parent();this.$input.val(this.$selectedItem.text().trim()).trigger("change",{synthetic:!0});var i=this.selectedItem();this.$element.trigger("changed.fu.combobox",i);t.preventDefault();this.$element.find(".dropdown-toggle").focus()},keypress:function(n){var u=38,i=40,f=n.which===u||n.which===i||n.which===37||n.which===39,r,t;this.options.showOptionsOnKeypress&&!this.$inputGroupBtn.hasClass("open")&&(this.$button.dropdown("toggle"),this.$input.focus());n.which===13?(n.preventDefault(),r=this.$dropMenu.find("li.selected").text().trim(),r.length>0?this.selectByText(r):this.selectByText(this.$input.val()),this.$inputGroupBtn.removeClass("open")):n.which===27?(n.preventDefault(),this.clearSelection(),this.$inputGroupBtn.removeClass("open")):this.options.showOptionsOnKeypress&&(n.which===i||n.which===u)&&(n.preventDefault(),t=this.$dropMenu.find("li.selected"),t.length>0&&(t=n.which===i?t.next(":not(.hidden)"):t.prev(":not(.hidden)")),t.length===0&&(t=n.which===i?this.$dropMenu.find("li:not(.hidden):first"):this.$dropMenu.find("li:not(.hidden):last")),this.doSelect(t));this.options.filterOnKeypress&&!f&&this.options.filter(this.$dropMenu.find("li"),this.$input.val(),this);this.previousKeyPress=n.which},inputchanged:function(t,i){var u=n(t.target).val(),r;if(i&&i.synthetic){this.selectByText(u);return}this.selectByText(u);r=this.selectedItem();r.text.length===0&&(r={text:u});this.$element.trigger("changed.fu.combobox",r)}};t.prototype.getValue=t.prototype.selectedItem;n.fn.combobox=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.combobox"),o=typeof i=="object"&&i;f||e.data("fu.combobox",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.combobox.defaults={autoResizeMenu:!0,filterOnKeypress:!1,showOptionsOnKeypress:!1,filter:function(t,i,r){var u=0;r.$dropMenu.find(".empty-indicator").remove();t.each(function(){var t=n(this),r=n(this).text().trim();t.removeClass();r===i?(t.addClass("text-success"),u++):r.substr(0,i.length)===i?(t.addClass("text-info"),u++):t.addClass("hidden")});u===0&&r.$dropMenu.append('<li class="empty-indicator text-muted"><em>No Matches<\/em><\/li>')}};n.fn.combobox.Constructor=t;n.fn.combobox.noConflict=function(){return n.fn.combobox=i,this};n(document).on("mousedown.fu.combobox.data-api","[data-initialize=combobox]",function(t){var i=n(t.target).closest(".combobox");i.data("fu.combobox")||i.combobox(i.data())});n(function(){n("[data-initialize=combobox]").each(function(){var t=n(this);t.data("fu.combobox")||t.combobox(t.data())})})}(n),function(n){var e="Invalid Date",u="moment.js is not available so you cannot use this function",r=[],t=!1,s=n.fn.datepicker,o=!1,f=function(){var n,t;for(o=!0,n=0,t=r.length;n<t;n++)r[n].init.call(r[n].scope);r=[]},i;typeof define=="function"&&define.amd?require(["moment"],function(n){t=n;f()},function(n){var t=n.requireModules&&n.requireModules[0];t==="moment"&&f()}):f();i=function(i,u){this.$element=n(i);this.options=n.extend(!0,{},n.fn.datepicker.defaults,u);this.$calendar=this.$element.find(".datepicker-calendar");this.$days=this.$calendar.find(".datepicker-calendar-days");this.$header=this.$calendar.find(".datepicker-calendar-header");this.$headerTitle=this.$header.find(".title");this.$input=this.$element.find("input");this.$inputGroupBtn=this.$element.find(".input-group-btn");this.$wheels=this.$element.find(".datepicker-wheels");this.$wheelsMonth=this.$element.find(".datepicker-wheels-month");this.$wheelsYear=this.$element.find(".datepicker-wheels-year");this.artificialScrolling=!1;this.formatDate=this.options.formatDate||this.formatDate;this.inputValue=null;this.moment=!1;this.momentFormat=null;this.parseDate=this.options.parseDate||this.parseDate;this.preventBlurHide=!1;this.restricted=this.options.restricted||[];this.restrictedParsed=[];this.restrictedText=this.options.restrictedText;this.sameYearOnly=this.options.sameYearOnly;this.selectedDate=null;this.yearRestriction=null;this.$calendar.find(".datepicker-today").on("click.fu.datepicker",n.proxy(this.todayClicked,this));this.$days.on("click.fu.datepicker","tr td button",n.proxy(this.dateClicked,this));this.$header.find(".next").on("click.fu.datepicker",n.proxy(this.next,this));this.$header.find(".prev").on("click.fu.datepicker",n.proxy(this.prev,this));this.$headerTitle.on("click.fu.datepicker",n.proxy(this.titleClicked,this));this.$input.on("change.fu.datepicker",n.proxy(this.inputChanged,this));this.$input.on("mousedown.fu.datepicker",n.proxy(this.showDropdown,this));this.$inputGroupBtn.on("hidden.bs.dropdown",n.proxy(this.hide,this));this.$inputGroupBtn.on("shown.bs.dropdown",n.proxy(this.show,this));this.$wheels.find(".datepicker-wheels-back").on("click.fu.datepicker",n.proxy(this.backClicked,this));this.$wheels.find(".datepicker-wheels-select").on("click.fu.datepicker",n.proxy(this.selectClicked,this));this.$wheelsMonth.on("click.fu.datepicker","ul button",n.proxy(this.monthClicked,this));this.$wheelsYear.on("click.fu.datepicker","ul button",n.proxy(this.yearClicked,this));this.$wheelsYear.find("ul").on("scroll.fu.datepicker",n.proxy(this.onYearScroll,this));var f=function(){this.checkForMomentJS()&&(t=t||window.moment,this.moment=!0,this.momentFormat=this.options.momentConfig.format,this.setCulture(this.options.momentConfig.culture),t.locale=t.locale||t.lang);this.setRestrictedDates(this.restricted);this.setDate(this.options.date)||(this.$input.val(""),this.inputValue=this.$input.val());this.sameYearOnly&&(this.yearRestriction=this.selectedDate?this.selectedDate.getFullYear():(new Date).getFullYear())};o?f.call(this):r.push({init:f,scope:this})};i.prototype={constructor:i,backClicked:function(){this.changeView("calendar")},changeView:function(n,t){n==="wheels"?(this.$calendar.hide().attr("aria-hidden","true"),this.$wheels.show().removeAttr("aria-hidden",""),t&&this.renderWheel(t)):(this.$wheels.hide().attr("aria-hidden","true"),this.$calendar.show().removeAttr("aria-hidden",""),t&&this.renderMonth(t))},checkForMomentJS:function(){return(n.isFunction(window.moment)||typeof t!="undefined"&&n.isFunction(t))&&n.isPlainObject(this.options.momentConfig)&&typeof this.options.momentConfig.culture=="string"&&typeof this.options.momentConfig.format=="string"?!0:!1},dateClicked:function(t){var i=n(t.currentTarget).parents("td:first"),r;i.hasClass("restricted")||(this.$days.find("td.selected").removeClass("selected"),i.addClass("selected"),r=new Date(i.attr("data-year"),i.attr("data-month"),i.attr("data-date")),this.selectedDate=r,this.$input.val(this.formatDate(r)),this.inputValue=this.$input.val(),this.hide(),this.$input.focus(),this.$element.trigger("dateClicked.fu.datepicker",r))},destroy:function(){return this.$element.remove(),this.$days.find("tbody").empty(),this.$wheelsYear.find("ul").empty(),this.$element[0].outerHTML},disable:function(){this.$element.addClass("disabled");this.$element.find("input, button").attr("disabled","disabled");this.$inputGroupBtn.removeClass("open")},enable:function(){this.$element.removeClass("disabled");this.$element.find("input, button").removeAttr("disabled")},formatDate:function(n){var i=function(n){var t="0"+n;return t.substr(t.length-2)};return this.moment?t(n).format(this.momentFormat):i(n.getMonth()+1)+"/"+i(n.getDate())+"/"+n.getFullYear()},getCulture:function(){if(this.moment)return t.locale();throw u;},getDate:function(){return this.selectedDate?this.selectedDate:new Date(NaN)},getFormat:function(){if(this.moment)return this.momentFormat;throw u;},getFormattedDate:function(){return this.selectedDate?this.formatDate(this.selectedDate):e},getRestrictedDates:function(){return this.restricted},inputChanged:function(){var t=this.$input.val(),n;t!==this.inputValue&&(n=this.setDate(t),n===null?this.$element.trigger("inputParsingFailed.fu.datepicker",t):n===!1?this.$element.trigger("inputRestrictedDate.fu.datepicker",n):this.$element.trigger("changed.fu.datepicker",n))},show:function(){var n=this.selectedDate?this.selectedDate:new Date;this.changeView("calendar",n);this.$inputGroupBtn.addClass("open");this.$element.trigger("shown.fu.datepicker")},showDropdown:function(){this.$input.is(":focus")||this.$inputGroupBtn.hasClass("open")||this.show()},hide:function(){this.$inputGroupBtn.removeClass("open");this.$element.trigger("hidden.fu.datepicker")},hideDropdown:function(){this.hide()},isInvalidDate:function(n){var t=n.toString();return t===e||t==="NaN"?!0:!1},isRestricted:function(n,t,i){var e=this.restrictedParsed,f,r,o,u;if(this.sameYearOnly&&this.yearRestriction!==null&&i!==this.yearRestriction)return!0;for(f=0,o=e.length;f<o;f++)if(r=e[f].from,u=e[f].to,(i>r.year||i===r.year&&t>r.month||i===r.year&&t===r.month&&n>=r.date)&&(i<u.year||i===u.year&&t<u.month||i===u.year&&t===u.month&&n<=u.date))return!0;return!1},monthClicked:function(t){this.$wheelsMonth.find(".selected").removeClass("selected");n(t.currentTarget).parent().addClass("selected")},next:function(){var n=this.$headerTitle.attr("data-month"),t=this.$headerTitle.attr("data-year");if(n++,n>11){if(this.sameYearOnly)return;n=0;t++}this.renderMonth(new Date(t,n,1))},onYearScroll:function(t){if(!this.artificialScrolling){var i=n(t.currentTarget),o=i.css("box-sizing")==="border-box"?i.outerHeight():i.height(),f=i.get(0).scrollHeight,e=i.scrollTop(),s=o/(f-e)*100,h=e/f*100,r,u;if(h<5){for(u=parseInt(i.find("li:first").attr("data-year"),10),r=u-1;r>u-11;r--)i.prepend('<li data-year="'+r+'"><button type="button">'+r+"<\/button><\/li>");this.artificialScrolling=!0;i.scrollTop(i.get(0).scrollHeight-f+e);this.artificialScrolling=!1}else if(s>90)for(u=parseInt(i.find("li:last").attr("data-year"),10),r=u+1;r<u+11;r++)i.append('<li data-year="'+r+'"><button type="button">'+r+"<\/button><\/li>")}},parseDate:function(n){var u=this,f=new Date(NaN),i,c,e,o,s,h,r;if(n){if(this.moment)return o=function(n){var i=t(n,u.momentFormat);return!0===i.isValid()?i.toDate():f},e=function(n){var i=t(new Date(n));return!0===i.isValid()?i.toDate():f},s=function(n,t,i){var r=t(n);return u.isInvalidDate(r)?(r=i(r),!u.isInvalidDate(r))?r:f:r},"string"==typeof n?s(n,o,e):s(n,e,o);if(typeof n=="string")if(i=new Date(Date.parse(n)),this.isInvalidDate(i)){if(n=n.split("T")[0],c=/^\s*(\d{4})-(\d\d)-(\d\d)\s*$/,r=c.exec(n),r&&(h=parseInt(r[2],10),i=new Date(r[1],h-1,r[3]),h===i.getMonth()+1))return i}else return i;else if(i=new Date(n),!this.isInvalidDate(i))return i}return new Date(NaN)},prev:function(){var n=this.$headerTitle.attr("data-month"),t=this.$headerTitle.attr("data-year");if(n--,n<0){if(this.sameYearOnly)return;n=11;t--}this.renderMonth(new Date(t,n,1))},renderMonth:function(t){t=t||new Date;var a=new Date(t.getFullYear(),t.getMonth(),1).getDay(),g=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),nt=new Date(t.getFullYear(),t.getMonth(),0).getDate(),tt=this.$headerTitle.find(".month"),v=t.getMonth(),y=new Date,it=y.getDate(),p=y.getMonth(),s=y.getFullYear(),o=this.selectedDate,rt=this.$days.find("tbody"),w=t.getFullYear(),r,f,e,h,c,b,u,l,k,i,d;for(o&&(o={date:o.getDate(),month:o.getMonth(),year:o.getFullYear()}),tt.find(".current").removeClass("current"),tt.find('span[data-month="'+v+'"]').addClass("current"),this.$headerTitle.find(".year").text(w),this.$headerTitle.attr({"data-month":v,"data-year":w}),rt.empty(),a!==0?(r=nt-a+1,u=-1):(r=1,u=0),b=g<=35-a?5:6,h=0;h<b;h++){for(d=n("<tr><\/tr>"),c=0;c<7;c++)i=n("<td><\/td>"),u===-1?(i.addClass("last-month"),l!==u&&i.addClass("first")):u===1&&(i.addClass("next-month"),l!==u&&i.addClass("first")),f=v+u,e=w,f<0?(f=11,e--):f>11&&(f=0,e++),i.attr({"data-date":r,"data-month":f,"data-year":e}),e===s&&f===p&&r===it?i.addClass("current-day"):(e<s||e===s&&f<p||e===s&&f===p&&r<it)&&(i.addClass("past"),this.options.allowPastDates||i.addClass("restricted").attr("title",this.restrictedText)),this.isRestricted(r,f,e)&&i.addClass("restricted").attr("title",this.restrictedText),o&&e===o.year&&f===o.month&&r===o.date&&i.addClass("selected"),i.hasClass("restricted")?i.html('<span><b class="datepicker-date">'+r+"<\/b><\/span>"):i.html('<span><button type="button" class="datepicker-date">'+r+"<\/button><\/span>"),r++,k=l,l=u,u===-1&&r>nt?(r=1,u=0,k!==u&&i.addClass("last")):u===0&&r>g&&(r=1,u=1,k!==u&&i.addClass("last")),h===b-1&&c===6&&i.addClass("last"),d.append(i);rt.append(d)}},renderWheel:function(n){var o=n.getMonth(),i=this.$wheelsMonth.find("ul"),e=n.getFullYear(),t=this.$wheelsYear.find("ul"),r,u,f;for(this.sameYearOnly?(this.$wheelsMonth.addClass("full"),this.$wheelsYear.addClass("hidden")):(this.$wheelsMonth.removeClass("full"),this.$wheelsYear.removeClass("hide hidden")),i.find(".selected").removeClass("selected"),u=i.find('li[data-month="'+o+'"]'),u.addClass("selected"),i.scrollTop(i.scrollTop()+(u.position().top-i.outerHeight()/2-u.outerHeight(!0)/2)),t.empty(),r=e-10;r<e+11;r++)t.append('<li data-year="'+r+'"><button type="button">'+r+"<\/button><\/li>");f=t.find('li[data-year="'+e+'"]');f.addClass("selected");this.artificialScrolling=!0;t.scrollTop(t.scrollTop()+(f.position().top-t.outerHeight()/2-f.outerHeight(!0)/2));this.artificialScrolling=!1;u.find("button").focus()},selectClicked:function(){var n=this.$wheelsMonth.find(".selected").attr("data-month"),t=this.$wheelsYear.find(".selected").attr("data-year");this.changeView("calendar",new Date(t,n,1))},setCulture:function(n){if(!n)return!1;if(this.moment)t.locale(n);else throw u;},setDate:function(n){var t=this.parseDate(n);return this.isInvalidDate(t)?(this.selectedDate=null,this.renderMonth()):this.isRestricted(t.getDate(),t.getMonth(),t.getFullYear())?(this.selectedDate=!1,this.renderMonth()):(this.selectedDate=t,this.renderMonth(t),this.$input.val(this.formatDate(t))),this.inputValue=this.$input.val(),this.selectedDate},setFormat:function(n){if(!n)return!1;if(this.moment)this.momentFormat=n;else throw u;},setRestrictedDates:function(n){var i=[],f=this,t,r,u=function(n){return n===-Infinity?{date:-Infinity,month:-Infinity,year:-Infinity}:n===Infinity?{date:Infinity,month:Infinity,year:Infinity}:(n=f.parseDate(n),{date:n.getDate(),month:n.getMonth(),year:n.getFullYear()})};for(this.restricted=n,t=0,r=n.length;t<r;t++)i.push({from:u(n[t].from),to:u(n[t].to)});this.restrictedParsed=i},titleClicked:function(){this.changeView("wheels",new Date(this.$headerTitle.attr("data-year"),this.$headerTitle.attr("data-month"),1))},todayClicked:function(){var n=new Date;(n.getMonth()+""!==this.$headerTitle.attr("data-month")||n.getFullYear()+""!==this.$headerTitle.attr("data-year"))&&this.renderMonth(n)},yearClicked:function(t){this.$wheelsYear.find(".selected").removeClass("selected");n(t.currentTarget).parent().addClass("selected")}};i.prototype.getValue=i.prototype.getDate;n.fn.datepicker=function(t){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.datepicker"),o=typeof t=="object"&&t;f||e.data("fu.datepicker",f=new i(this,o));typeof t=="string"&&(r=f[t].apply(f,u))});return r===undefined?f:r};n.fn.datepicker.defaults={allowPastDates:!1,date:new Date,formatDate:null,momentConfig:{culture:"en",format:"L"},parseDate:null,restricted:[],restrictedText:"Restricted",sameYearOnly:!1};n.fn.datepicker.Constructor=i;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=s,this};n(document).on("mousedown.fu.datepicker.data-api","[data-initialize=datepicker]",function(t){var i=n(t.target).closest(".datepicker");i.data("datepicker")||i.datepicker(i.data())});n(document).on("click.fu.datepicker.data-api",".datepicker .dropdown-menu",function(t){var i=n(t.target);(!i.is(".datepicker-date")||i.closest(".restricted").length)&&t.stopPropagation()});n(document).on("click.fu.datepicker.data-api",".datepicker input",function(n){n.stopPropagation()});n(function(){n("[data-initialize=datepicker]").each(function(){var t=n(this);t.data("datepicker")||t.datepicker(t.data())})})}(n),function(n){function t(t){n(t).css({visibility:"hidden"});i(t)?t.parent().addClass("dropup"):t.parent().removeClass("dropup");n(t).css({visibility:"visible"})}function i(n){var i=r(n),t={};return(t.parentHeight=n.parent().outerHeight(),t.parentOffsetTop=n.parent().offset().top,t.dropdownHeight=n.outerHeight(),t.containerHeight=i.overflowElement.outerHeight(),t.containerOffsetTop=!i.isWindow?i.overflowElement.offset().top:i.overflowElement.scrollTop(),t.fromTop=t.parentOffsetTop-t.containerOffsetTop,t.fromBottom=t.containerHeight-t.parentHeight-(t.parentOffsetTop-t.containerOffsetTop),t.dropdownHeight<t.fromBottom)?!1:t.dropdownHeight<t.fromTop?!0:t.dropdownHeight>=t.fromTop&&t.dropdownHeight>=t.fromBottom?t.fromTop>=t.fromBottom?!0:!1:void 0}function r(t){var u=t.attr("data-target"),i=!0,r;return u?u!=="window"&&(r=n(u),i=!1):n.each(t.parents(),function(t,u){if(n(u).css("overflow")!=="visible")return r=u,i=!1,!1}),i&&(r=window),{overflowElement:n(r),isWindow:i}}n(document.body).on("click.fu.dropdown-autoflip","[data-toggle=dropdown][data-flip]",function(){n(this).data().flip==="auto"&&t(n(this).next(".dropdown-menu"))});n(document.body).on("suggested.fu.pillbox",function(i,r){t(n(r));n(r).parent().addClass("open")});n.fn.dropdownautoflip=function(){}}(n),function(n){var i=n.fn.loader,t=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.loader.defaults,i);this.begin=this.$element.is("[data-begin]")?parseInt(this.$element.attr("data-begin"),10):1;this.delay=this.$element.is("[data-delay]")?parseFloat(this.$element.attr("data-delay")):150;this.end=this.$element.is("[data-end]")?parseInt(this.$element.attr("data-end"),10):8;this.frame=this.$element.is("[data-frame]")?parseInt(this.$element.attr("data-frame"),10):this.begin;this.isIElt9=!1;this.timeout={};var r=this.msieVersion();r!==!1&&r<9&&(this.$element.addClass("iefix"),this.isIElt9=!0);this.$element.attr("data-frame",this.frame+"");this.play()};t.prototype={constructor:t,destroy:function(){return this.pause(),this.$element.remove(),this.$element[0].outerHTML},ieRepaint:function(){this.isIElt9&&this.$element.addClass("iefix_repaint").removeClass("iefix_repaint")},msieVersion:function(){var n=window.navigator.userAgent,t=n.indexOf("MSIE ");return t>0?parseInt(n.substring(t+5,n.indexOf(".",t)),10):!1},next:function(){this.frame++;this.frame>this.end&&(this.frame=this.begin);this.$element.attr("data-frame",this.frame+"");this.ieRepaint()},pause:function(){clearTimeout(this.timeout)},play:function(){var n=this;clearTimeout(this.timeout);this.timeout=setTimeout(function(){n.next();n.play()},this.delay)},previous:function(){this.frame--;this.frame<this.begin&&(this.frame=this.end);this.$element.attr("data-frame",this.frame+"");this.ieRepaint()},reset:function(){this.frame=this.begin;this.$element.attr("data-frame",this.frame+"");this.ieRepaint()}};n.fn.loader=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.loader"),o=typeof i=="object"&&i;f||e.data("fu.loader",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.loader.defaults={};n.fn.loader.Constructor=t;n.fn.loader.noConflict=function(){return n.fn.loader=i,this};n(function(){n("[data-initialize=loader]").each(function(){var t=n(this);t.data("fu.loader")||t.loader(t.data())})})}(n),function(n){var r=n.fn.placard,u={accepted:"onAccept",cancelled:"onCancel"},t=function(t,i){var r=this;this.$element=n(t);this.options=n.extend({},n.fn.placard.defaults,i);this.$element.attr("data-ellipsis")==="true"&&(this.options.applyEllipsis=!0);this.$accept=this.$element.find(".placard-accept");this.$cancel=this.$element.find(".placard-cancel");this.$field=this.$element.find(".placard-field");this.$footer=this.$element.find(".placard-footer");this.$header=this.$element.find(".placard-header");this.$popup=this.$element.find(".placard-popup");this.actualValue=null;this.clickStamp="_";this.previousValue="";this.options.revertOnCancel===-1&&(this.options.revertOnCancel=this.$accept.length>0);this.isContentEditableDiv=this.$field.is("div");this.isInput=this.$field.is("input");this.divInTextareaMode=this.isContentEditableDiv&&this.$field.attr("data-textarea")==="true";this.$field.on("focus.fu.placard",n.proxy(this.show,this));this.$field.on("keydown.fu.placard",n.proxy(this.keyComplete,this));this.$element.on("close.fu.placard",n.proxy(this.hide,this));this.$accept.on("click.fu.placard",n.proxy(this.complete,this,"accepted"));this.$cancel.on("click.fu.placard",function(n){n.preventDefault();r.complete("cancelled")});this.applyEllipsis()},i=function(n){return n.$element.hasClass("showing")},f=function(){var t;if(t=n(document).find(".placard.showing"),t.length>0){if(t.data("fu.placard")&&t.data("fu.placard").options.explicit)return!1;t.placard("externalClickListener",{},!0)}return!0};t.prototype={constructor:t,complete:function(n){var i=this.options[u[n]],t={previousValue:this.previousValue,value:this.getValue()};i?(i(t),this.$element.trigger(n+".fu.placard",t)):(n==="cancelled"&&this.options.revertOnCancel&&this.setValue(this.previousValue,!0),this.$element.trigger(n+".fu.placard",t),this.hide())},keyComplete:function(n){(this.isContentEditableDiv&&!this.divInTextareaMode||this.isInput)&&n.keyCode===13?(this.complete("accepted"),this.$field.blur()):n.keyCode===27&&(this.complete("cancelled"),this.$field.blur())},destroy:function(){return this.$element.remove(),n(document).off("click.fu.placard.externalClick."+this.clickStamp),this.$element.find("input").each(function(){n(this).attr("value",n(this).val())}),this.$element[0].outerHTML},disable:function(){this.$element.addClass("disabled");this.$field.attr("disabled","disabled");this.isContentEditableDiv&&this.$field.removeAttr("contenteditable");this.hide()},applyEllipsis:function(){var t,i,n;if(this.options.applyEllipsis)if(t=this.$field.get(0),this.isContentEditableDiv&&!this.divInTextareaMode||this.isInput)t.scrollLeft=0;else if(t.scrollTop=0,t.clientHeight<t.scrollHeight){for(this.actualValue=this.getValue(),this.setValue("",!0),n="",i=0;t.clientHeight>=t.scrollHeight;)n+=this.actualValue[i],this.setValue(n+"...",!0),i++;n=n.length>0?n.substring(0,n.length-1):"";this.setValue(n+"...",!0)}},enable:function(){this.$element.removeClass("disabled");this.$field.removeAttr("disabled");this.isContentEditableDiv&&this.$field.attr("contenteditable","true")},externalClickListener:function(n,t){(t===!0||this.isExternalClick(n))&&this.complete(this.options.externalClickAction)},getValue:function(){return this.actualValue!==null?this.actualValue:this.isContentEditableDiv?this.$field.html():this.$field.val()},hide:function(){this.$element.hasClass("showing")&&(this.$element.removeClass("showing"),this.applyEllipsis(),n(document).off("click.fu.placard.externalClick."+this.clickStamp),this.$element.trigger("hidden.fu.placard"))},isExternalClick:function(t){var f=this.$element.get(0),r=this.options.externalClickExceptions||[],u=n(t.target),i,e;if(t.target===f||u.parents(".placard:first").get(0)===f)return!1;for(i=0,e=r.length;i<e;i++)if(u.is(r[i])||u.parents(r[i]).length>0)return!1;return!0},setValue:function(n,t){return typeof t=="undefined"&&(t=!this.options.applyEllipsis),this.isContentEditableDiv?this.$field.empty().append(n):this.$field.val(n),t||i(this)||this.applyEllipsis(),this.$field},show:function(){i(this)||f()&&(this.previousValue=this.isContentEditableDiv?this.$field.html():this.$field.val(),this.actualValue!==null&&(this.setValue(this.actualValue,!0),this.actualValue=null),this.showPlacard())},showPlacard:function(){if(this.$element.addClass("showing"),this.$header.length>0&&this.$popup.css("top","-"+this.$header.outerHeight(!0)+"px"),this.$footer.length>0&&this.$popup.css("bottom","-"+this.$footer.outerHeight(!0)+"px"),this.$element.trigger("shown.fu.placard"),this.clickStamp=(new Date).getTime()+(Math.floor(Math.random()*100)+1),!this.options.explicit)n(document).on("click.fu.placard.externalClick."+this.clickStamp,n.proxy(this.externalClickListener,this))}};n.fn.placard=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.placard"),o=typeof i=="object"&&i;f||e.data("fu.placard",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.placard.defaults={onAccept:undefined,onCancel:undefined,externalClickAction:"cancelled",externalClickExceptions:[],explicit:!1,revertOnCancel:-1,applyEllipsis:!1};n.fn.placard.Constructor=t;n.fn.placard.noConflict=function(){return n.fn.placard=r,this};n(document).on("focus.fu.placard.data-api","[data-initialize=placard]",function(t){var i=n(t.target).closest(".placard");i.data("fu.placard")||i.placard(i.data())});n(function(){n("[data-initialize=placard]").each(function(){var t=n(this);t.data("fu.placard")||t.placard(t.data())})})}(n),function(n){var i=n.fn.radio,t=function(t,i){if(this.options=n.extend({},n.fn.radio.defaults,i),t.tagName.toLowerCase()==="label"){this.$label=n(t);this.$radio=this.$label.find('input[type="radio"]');this.groupName=this.$radio.attr("name");var r=this.$radio.attr("data-toggle");this.$toggleContainer=n(r);this.$radio.on("change",n.proxy(this.itemchecked,this));this.setInitialState()}};t.prototype={constructor:t,setInitialState:function(){var n=this.$radio,r=this.$label,t=n.prop("checked"),i=n.prop("disabled");this.setCheckedState(n,t);this.setDisabledState(n,i)},resetGroup:function(){var t=n('input[name="'+this.groupName+'"]');t.each(function(t,i){var r=n(i),u=r.parent(),f=r.attr("data-toggle"),e=n(f);u.removeClass("checked");e.addClass("hidden")})},setCheckedState:function(t,i){var u=t,r=u.parent(),e=u.attr("data-toggle"),f=n(e);i?(this.resetGroup(),u.prop("checked",!0),r.addClass("checked"),f.removeClass("hide hidden"),r.trigger("checked.fu.radio")):(u.prop("checked",!1),r.removeClass("checked"),f.addClass("hidden"),r.trigger("unchecked.fu.radio"));r.trigger("changed.fu.radio",i)},setDisabledState:function(n,t){var r=n,i=this.$label;t?(this.$radio.prop("disabled",!0),i.addClass("disabled"),i.trigger("disabled.fu.radio")):(this.$radio.prop("disabled",!1),i.removeClass("disabled"),i.trigger("enabled.fu.radio"))},itemchecked:function(t){var i=n(t.target);this.setCheckedState(i,!0)},check:function(){this.setCheckedState(this.$radio,!0)},uncheck:function(){this.setCheckedState(this.$radio,!1)},isChecked:function(){return this.$radio.prop("checked")},enable:function(){this.setDisabledState(this.$radio,!1)},disable:function(){this.setDisabledState(this.$radio,!0)},destroy:function(){return this.$label.remove(),this.$label[0].outerHTML}};t.prototype.getValue=t.prototype.isChecked;n.fn.radio=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.radio"),o=typeof i=="object"&&i;f||e.data("fu.radio",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.radio.defaults={};n.fn.radio.Constructor=t;n.fn.radio.noConflict=function(){return n.fn.radio=i,this};n(document).on("mouseover.fu.radio.data-api","[data-initialize=radio]",function(t){var i=n(t.target);i.data("fu.radio")||i.radio(i.data())});n(function(){n("[data-initialize=radio]").each(function(){var t=n(this);t.data("fu.radio")||t.radio(t.data())})})}(n),function(n){var i=n.fn.search,t=function(t,i){this.$element=n(t);this.$repeater=n(t).closest(".repeater");this.options=n.extend({},n.fn.search.defaults,i);this.$element.attr("data-searchOnKeyPress")==="true"&&(this.options.searchOnKeyPress=!0);this.$button=this.$element.find("button");this.$input=this.$element.find("input");this.$icon=this.$element.find(".glyphicon, .fuelux-icon");this.$button.on("click.fu.search",n.proxy(this.buttonclicked,this));this.$input.on("keyup.fu.search",n.proxy(this.keypress,this));if(this.$repeater.length>0)this.$repeater.on("rendered.fu.repeater",n.proxy(this.clearPending,this));this.activeSearch=""};t.prototype={constructor:t,destroy:function(){return this.$element.remove(),this.$element.find("input").each(function(){n(this).attr("value",n(this).val())}),this.$element[0].outerHTML},search:function(n){this.$icon.hasClass("glyphicon")&&this.$icon.removeClass("glyphicon-search").addClass("glyphicon-remove");this.$icon.hasClass("fuelux-icon")&&this.$icon.removeClass("fuelux-icon-search").addClass("fuelux-icon-remove");this.activeSearch=n;this.$element.addClass("searched pending");this.$element.trigger("searched.fu.search",n)},clear:function(){this.$icon.hasClass("glyphicon")&&this.$icon.removeClass("glyphicon-remove").addClass("glyphicon-search");this.$icon.hasClass("fuelux-icon")&&this.$icon.removeClass("fuelux-icon-remove").addClass("fuelux-icon-search");this.$element.hasClass("pending")&&this.$element.trigger("canceled.fu.search");this.activeSearch="";this.$input.val("");this.$element.trigger("cleared.fu.search");this.$element.removeClass("searched pending")},clearPending:function(){this.$element.removeClass("pending")},action:function(){var n=this.$input.val();n&&n.length>0?this.search(n):this.clear()},buttonclicked:function(t){(t.preventDefault(),n(t.currentTarget).is(".disabled, :disabled"))||(this.$element.hasClass("pending")||this.$element.hasClass("searched")?this.clear():this.action())},keypress:function(n){n.which===13?(n.preventDefault(),this.action()):n.which===9?n.preventDefault():n.which===27?(n.preventDefault(),this.clear()):this.options.searchOnKeyPress&&this.action()},disable:function(){this.$element.addClass("disabled");this.$input.attr("disabled","disabled");this.options.allowCancel||this.$button.addClass("disabled")},enable:function(){this.$element.removeClass("disabled");this.$input.removeAttr("disabled");this.$button.removeClass("disabled")}};n.fn.search=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.search"),o=typeof i=="object"&&i;f||e.data("fu.search",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.search.defaults={clearOnEmpty:!1,searchOnKeyPress:!1,allowCancel:!1};n.fn.search.Constructor=t;n.fn.search.noConflict=function(){return n.fn.search=i,this};n(document).on("mousedown.fu.search.data-api","[data-initialize=search]",function(t){var i=n(t.target).closest(".search");i.data("fu.search")||i.search(i.data())});n(function(){n("[data-initialize=search]").each(function(){var t=n(this);t.data("fu.search")||t.search(t.data())})})}(n),function(n){var i=n.fn.selectlist,t=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.selectlist.defaults,i);this.$button=this.$element.find(".btn.dropdown-toggle");this.$hiddenField=this.$element.find(".hidden-field");this.$label=this.$element.find(".selected-label");this.$dropdownMenu=this.$element.find(".dropdown-menu");this.$element.on("click.fu.selectlist",".dropdown-menu a",n.proxy(this.itemClicked,this));this.setDefaultSelection();(i.resize==="auto"||this.$element.attr("data-resize")==="auto")&&this.resize();var r=this.$dropdownMenu.children("li");r.length===0&&(this.disable(),this.doSelect(n(this.options.emptyLabelHTML)));this.$element.on("shown.bs.dropdown",function(){var t=n(this);n(document).on("keypress.fu.selectlist",function(i){var r=String.fromCharCode(i.which);t.find("li").each(function(t,i){if(n(i).text().charAt(0).toLowerCase()===r)return n(i).children("a").focus(),!1})})});this.$element.on("hide.bs.dropdown",function(){n(document).off("keypress.fu.selectlist")})};t.prototype={constructor:t,destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},doSelect:function(t){var i;this.$selectedItem=i=t;this.$hiddenField.val(this.$selectedItem.attr("data-value"));this.$label.html(n(this.$selectedItem.children()[0]).html());this.$element.find("li").each(function(){i.is(n(this))?n(this).attr("data-selected",!0):n(this).removeData("selected").removeAttr("data-selected")})},itemClicked:function(t){(this.$element.trigger("clicked.fu.selectlist",this.$selectedItem),t.preventDefault(),n(t.currentTarget).parent("li").is(".disabled, :disabled"))||(n(t.target).parent().is(this.$selectedItem)||this.itemChanged(t),this.$element.find(".dropdown-toggle").focus())},itemChanged:function(t){this.doSelect(n(t.target).closest("li"));var i=this.selectedItem();this.$element.trigger("changed.fu.selectlist",i)},resize:function(){var i=0,r=0,t=n("<div/>").addClass("selectlist-sizer");(Boolean(n(document).find("html").hasClass("fuelux"))?n(document.body).append(t):n(".fuelux:first").append(t),t.append(this.$element.clone()),this.$element.find("a").each(function(){t.find(".selected-label").text(n(this).text());r=t.find(".selectlist").outerWidth();r=r+t.find(".sr-only").outerWidth();r>i&&(i=r)}),i<=1)||(this.$button.css("width",i),this.$dropdownMenu.css("width",i),t.remove())},selectedItem:function(){var t=this.$selectedItem.text();return n.extend({text:t},this.$selectedItem.data())},selectByText:function(t){var i=n([]);this.$element.find("li").each(function(){if((this.textContent||this.innerText||n(this).text()||"").toLowerCase()===(t||"").toLowerCase())return i=n(this),!1});this.doSelect(i)},selectByValue:function(n){var t='li[data-value="'+n+'"]';this.selectBySelector(t)},selectByIndex:function(n){var t="li:eq("+n+")";this.selectBySelector(t)},selectBySelector:function(n){var t=this.$element.find(n);this.doSelect(t)},setDefaultSelection:function(){var n=this.$element.find("li[data-selected=true]").eq(0);n.length===0&&(n=this.$element.find("li").has("a").eq(0));this.doSelect(n)},enable:function(){this.$element.removeClass("disabled");this.$button.removeClass("disabled")},disable:function(){this.$element.addClass("disabled");this.$button.addClass("disabled")}};t.prototype.getValue=t.prototype.selectedItem;n.fn.selectlist=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.selectlist"),o=typeof i=="object"&&i;f||e.data("fu.selectlist",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.selectlist.defaults={emptyLabelHTML:'<li data-value=""><a href="#">No items<\/a><\/li>'};n.fn.selectlist.Constructor=t;n.fn.selectlist.noConflict=function(){return n.fn.selectlist=i,this};n(document).on("mousedown.fu.selectlist.data-api","[data-initialize=selectlist]",function(t){var i=n(t.target).closest(".selectlist");i.data("fu.selectlist")||i.selectlist(i.data())});n(function(){n("[data-initialize=selectlist]").each(function(){var t=n(this);t.data("fu.selectlist")||t.selectlist(t.data())})})}(n),function(n){var r=n.fn.spinbox,t=function(t,r){this.$element=n(t);this.$element.find(".btn").on("click",function(n){n.preventDefault()});this.options=n.extend({},n.fn.spinbox.defaults,r);this.options.step=this.$element.data("step")||this.options.step;this.options.value<this.options.min?this.options.value=this.options.min:this.options.max<this.options.value&&(this.options.value=this.options.max);this.$input=this.$element.find(".spinbox-input");this.$input.on("focusout.fu.spinbox",this.$input,n.proxy(this.change,this));this.$element.on("keydown.fu.spinbox",this.$input,n.proxy(this.keydown,this));this.$element.on("keyup.fu.spinbox",this.$input,n.proxy(this.keyup,this));if(this.options.hold){this.$element.on("mousedown.fu.spinbox",".spinbox-up",n.proxy(function(){this.startSpin(!0)},this));this.$element.on("mouseup.fu.spinbox",".spinbox-up, .spinbox-down",n.proxy(this.stopSpin,this));this.$element.on("mouseout.fu.spinbox",".spinbox-up, .spinbox-down",n.proxy(this.stopSpin,this));this.$element.on("mousedown.fu.spinbox",".spinbox-down",n.proxy(function(){this.startSpin(!1)},this))}else{this.$element.on("click.fu.spinbox",".spinbox-up",n.proxy(function(){this.step(!0)},this));this.$element.on("click.fu.spinbox",".spinbox-down",n.proxy(function(){this.step(!1)},this))}this.switches={count:1,enabled:!0};this.switches.speed=this.options.speed==="medium"?300:this.options.speed==="fast"?100:500;this.options.defaultUnit=i(this.options.defaultUnit,this.options.units)?this.options.defaultUnit:"";this.unit=this.options.defaultUnit;this.lastValue=this.options.value;this.render();this.options.disabled&&this.disable()},u=function(n,t){return Math.round(n/t)*t},i=function(t,i){var r=!1,u=t.toLowerCase();return n.each(i,function(n,t){return t=t.toLowerCase(),u===t?(r=!0,!1):void 0}),r},f=function(n){return isNaN(parseFloat(n))?n:(n>this.options.max?n=this.options.cycle?this.options.min:this.options.max:n<this.options.min&&(n=this.options.cycle?this.options.max:this.options.min),this.options.limitToStep&&this.options.step&&(n=u(n,this.options.step),n>this.options.max?n=n-this.options.step:n<this.options.min&&(n=n+this.options.step)),n)};t.prototype={constructor:t,destroy:function(){return this.$element.remove(),this.$element.find("input").each(function(){n(this).attr("value",n(this).val())}),this.$element[0].outerHTML},render:function(){this.setValue(this.getDisplayValue())},change:function(){this.setValue(this.getDisplayValue());this.triggerChangedEvent()},stopSpin:function(){this.switches.timeout!==undefined&&(clearTimeout(this.switches.timeout),this.switches.count=1,this.triggerChangedEvent())},triggerChangedEvent:function(){var n=this.getValue();n!==this.lastValue&&(this.lastValue=n,this.$element.trigger("changed.fu.spinbox",n))},startSpin:function(t){if(!this.options.disabled){var i=this.switches.count;i===1?(this.step(t),i=1):i=i<3?1.5:i<8?2.5:4;this.switches.timeout=setTimeout(n.proxy(function(){this.iterate(t)},this),this.switches.speed/i);this.switches.count++}},iterate:function(n){this.step(n);this.startSpin(n)},step:function(n){this.setValue(this.getDisplayValue());var t;t=n?this.options.value+this.options.step:this.options.value-this.options.step;t=t.toFixed(5);this.setValue(t+this.unit)},getDisplayValue:function(){var n=this.parseInput(this.$input.val());return!n?this.options.value:n},setDisplayValue:function(n){this.$input.val(n)},getValue:function(){var n=this.options.value;return this.options.decimalMark!=="."&&(n=(n+"").split(".").join(this.options.decimalMark)),n+this.unit},setValue:function(n){var r,t;return(this.options.decimalMark!=="."&&(n=this.parseInput(n)),typeof n!="number"&&(r=n.replace(/[0-9.-]/g,""),this.unit=i(r,this.options.units)?r:this.options.defaultUnit),t=this.getIntValue(n),isNaN(t)&&!isFinite(t))?this.setValue(this.options.value):(t=f.call(this,t),this.options.value=t,n=t+this.unit,this.options.decimalMark!=="."&&(n=(n+"").split(".").join(this.options.decimalMark)),this.setDisplayValue(n),this)},value:function(n){return n||n===0?this.setValue(n):this.getValue()},parseInput:function(n){return(n+"").split(this.options.decimalMark).join(".")},getIntValue:function(n){if(n=typeof n=="undefined"?this.getValue():n,typeof n!="undefined")return typeof n=="string"&&(n=this.parseInput(n)),parseFloat(n,10)},disable:function(){this.options.disabled=!0;this.$element.addClass("disabled");this.$input.attr("disabled","");this.$element.find("button").addClass("disabled")},enable:function(){this.options.disabled=!1;this.$element.removeClass("disabled");this.$input.removeAttr("disabled");this.$element.find("button").removeClass("disabled")},keydown:function(n){var t=n.keyCode;t===38?this.step(!0):t===40?this.step(!1):t===13&&this.change()},keyup:function(n){var t=n.keyCode;(t===38||t===40)&&this.triggerChangedEvent()}};n.fn.spinbox=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.spinbox"),o=typeof i=="object"&&i;f||e.data("fu.spinbox",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.spinbox.defaults={value:0,min:0,max:999,step:1,hold:!0,speed:"medium",disabled:!1,cycle:!1,units:[],decimalMark:".",defaultUnit:"",limitToStep:!1};n.fn.spinbox.Constructor=t;n.fn.spinbox.noConflict=function(){return n.fn.spinbox=r,this};n(document).on("mousedown.fu.spinbox.data-api","[data-initialize=spinbox]",function(t){var i=n(t.target).closest(".spinbox");i.data("fu.spinbox")||i.spinbox(i.data())});n(function(){n("[data-initialize=spinbox]").each(function(){var t=n(this);t.data("fu.spinbox")||t.spinbox(t.data())})})}(n),function(n){function r(n,t){n.addClass("tree-selected");n.data("type")==="item"&&t.hasClass("fueluxicon-bullet")&&t.removeClass("fueluxicon-bullet").addClass("glyphicon-ok")}function i(n,t){n.removeClass("tree-selected");n.data("type")==="item"&&t.hasClass("glyphicon-ok")&&t.removeClass("glyphicon-ok").addClass("fueluxicon-bullet")}function f(t,u,f){n.each(f.$elements,function(t,i){var r=n(i);r[0]!==u.$element[0]&&f.dataForEvent.push(n(r).data())});u.$element.hasClass("tree-selected")?(i(u.$element,u.$icon),f.eventType="deselected"):(r(u.$element,u.$icon),f.eventType="selected",f.dataForEvent.push(u.elementData))}function e(n,t,u){if(u.$elements[0]!==t.$element[0]){var f=n.deselectAll(n.$element);r(t.$element,t.$icon);u.eventType="selected";u.dataForEvent=[t.elementData]}else i(t.$element,t.$icon),u.eventType="deselected",u.dataForEvent=[]}var u=n.fn.tree,t=function(t,i){if(this.$element=n(t),this.options=n.extend({},n.fn.tree.defaults,i),this.options.itemSelect)this.$element.on("click.fu.tree",".tree-item",n.proxy(function(n){this.selectItem(n.currentTarget)},this));this.$element.on("click.fu.tree",".tree-branch-name",n.proxy(function(n){this.toggleFolder(n.currentTarget)},this));this.$element.on("click.fu.tree",".tree-overflow",n.proxy(function(t){this.populate(n(t.currentTarget))},this));if(this.options.folderSelect){this.$element.addClass("tree-folder-select");this.$element.off("click.fu.tree",".tree-branch-name");this.$element.on("click.fu.tree",".icon-caret",n.proxy(function(t){this.toggleFolder(n(t.currentTarget).parent())},this));this.$element.on("click.fu.tree",".tree-branch-name",n.proxy(function(t){this.selectFolder(n(t.currentTarget))},this))}this.render()};t.prototype={constructor:t,deselectAll:function(t){t=t||this.$element;var r=n(t).find(".tree-selected");return r.each(function(t,r){i(n(r),n(r).find(".glyphicon"))}),r},destroy:function(){return this.$element.find("li:not([data-template])").remove(),this.$element.remove(),this.$element[0].outerHTML},render:function(){this.populate(this.$element)},populate:function(t,i){var u=this,e=t.hasClass("tree-overflow"),r=t.hasClass("tree")?t:t.parent(),o=r.hasClass("tree"),f,s;e&&!o&&(r=r.parent());f=r.data();e&&(f.overflow=t.data());i=i||!1;e&&(o?t.replaceWith(r.find("> .tree-loader").remove()):t.remove());s=r.find(".tree-loader:last");i===!1&&s.removeClass("hide hidden");this.options.dataSource(f?f:{},function(t){n.each(t.data,function(t,i){var f,e;i.type==="folder"?(f=u.$element.find("[data-template=treebranch]:eq(0)").clone().removeClass("hide hidden").removeData("template").removeAttr("data-template"),f.data(i),f.find(".tree-branch-name > .tree-label").html(i.text||i.name)):i.type==="item"?(f=u.$element.find("[data-template=treeitem]:eq(0)").clone().removeClass("hide hidden").removeData("template").removeAttr("data-template"),f.find(".tree-item-name > .tree-label").html(i.text||i.name),f.data(i)):i.type==="overflow"&&(f=u.$element.find("[data-template=treeoverflow]:eq(0)").clone().removeClass("hide hidden").removeData("template").removeAttr("data-template"),f.find(".tree-overflow-name > .tree-label").html(i.text||i.name),f.data(i));e=i.attr||i.dataAttributes||[];n.each(e,function(n,t){switch(n){case"cssClass":case"class":case"className":f.addClass(t);break;case"data-icon":f.find(".icon-item").removeClass().addClass("icon-item "+t);f.attr(n,t);break;case"id":f.attr(n,t);f.attr("aria-labelledby",t+"-label");f.find(".tree-branch-name > .tree-label").attr("id",t+"-label");break;default:f.attr(n,t)}});o?r.append(f):r.find(".tree-branch-children:eq(0)").append(f)});r.find(".tree-loader").addClass("hidden");u.$element.trigger("loaded.fu.tree",r)})},selectTreeNode:function(t,i){var r={},u;r.$element=n(t);u={};u.$elements=this.$element.find(".tree-selected");u.dataForEvent=[];i==="folder"?(r.$element=r.$element.closest(".tree-branch"),r.$icon=r.$element.find(".icon-folder")):r.$icon=r.$element.find(".icon-item");r.elementData=r.$element.data();this.options.multiSelect?f(this,r,u):e(this,r,u);this.$element.trigger(u.eventType+".fu.tree",{target:r.elementData,selected:u.dataForEvent});r.$element.trigger("updated.fu.tree",{selected:u.dataForEvent,item:r.$element,eventType:u.eventType})},discloseFolder:function(t){var u=n(t),i=u.closest(".tree-branch"),r=i.find(".tree-branch-children"),f=r.eq(0);i.addClass("tree-open");i.attr("aria-expanded","true");f.removeClass("hide hidden");i.find("> .tree-branch-header .icon-folder").eq(0).removeClass("glyphicon-folder-close").addClass("glyphicon-folder-open");r.children().length||this.populate(r);this.$element.trigger("disclosedFolder.fu.tree",i.data())},closeFolder:function(t){var u=n(t),i=u.closest(".tree-branch"),f=i.find(".tree-branch-children"),r=f.eq(0);i.removeClass("tree-open");i.attr("aria-expanded","false");r.addClass("hidden");i.find("> .tree-branch-header .icon-folder").eq(0).removeClass("glyphicon-folder-open").addClass("glyphicon-folder-close");this.options.cacheItems||r.empty();this.$element.trigger("closed.fu.tree",i.data())},toggleFolder:function(t){var i=n(t);i.find(".glyphicon-folder-close").length?this.discloseFolder(t):i.find(".glyphicon-folder-open").length&&this.closeFolder(t)},selectFolder:function(n){this.options.folderSelect&&this.selectTreeNode(n,"folder")},selectItem:function(n){this.options.itemSelect&&this.selectTreeNode(n,"item")},selectedItems:function(){var i=this.$element.find(".tree-selected"),t=[];return n.each(i,function(i,r){t.push(n(r).data())}),t},collapse:function(){var n=this,t=[],i=function i(r,u){t.push(u);n.$element.find(".tree-branch.tree-open:not('.hidden, .hide')").length===0&&(n.$element.trigger("closedAll.fu.tree",{tree:n.$element,reportedClosed:t}),n.$element.off("loaded.fu.tree",n.$element,i))};n.$element.on("closed.fu.tree",i);n.$element.find(".tree-branch.tree-open:not('.hidden, .hide')").each(function(){n.closeFolder(this)})},discloseVisible:function(){var t=this,u=t.$element.find(".tree-branch:not('.tree-open, .hidden, .hide')"),i=[],r=function r(n,f){i.push(f);i.length===u.length&&(t.$element.trigger("disclosedVisible.fu.tree",{tree:t.$element,reportedOpened:i}),t.$element.off("loaded.fu.tree",t.$element,r))};t.$element.on("loaded.fu.tree",r);t.$element.find(".tree-branch:not('.tree-open, .hidden, .hide')").each(function(){t.discloseFolder(n(this).find(".tree-branch-header"))})},discloseAll:function(){var n=this,t,i;if(typeof n.$element.data("disclosures")=="undefined"&&n.$element.data("disclosures",0),t=n.options.disclosuresUpperLimit>=1&&n.$element.data("disclosures")>=n.options.disclosuresUpperLimit,i=n.$element.find(".tree-branch:not('.tree-open, .hidden, .hide')").length===0,i){if(n.$element.trigger("disclosedAll.fu.tree",{tree:n.$element,disclosures:n.$element.data("disclosures")}),!n.options.cacheItems)n.$element.one("closeAll.fu.tree",function(){n.$element.data("disclosures",0)})}else{if(t&&(n.$element.trigger("exceededDisclosuresLimit.fu.tree",{tree:n.$element,disclosures:n.$element.data("disclosures")}),!n.$element.data("ignore-disclosures-limit")))return;n.$element.data("disclosures",n.$element.data("disclosures")+1);n.$element.one("disclosedVisible.fu.tree",function(){n.discloseAll()});n.discloseVisible()}},refreshFolder:function(n){var t=n.closest(".tree-branch"),i=t.find(".tree-branch-children");i.eq(0).empty();t.hasClass("tree-open")?this.populate(i,!1):this.populate(i,!0);this.$element.trigger("refreshedFolder.fu.tree",t.data())}};t.prototype.closeAll=t.prototype.collapse;t.prototype.openFolder=t.prototype.discloseFolder;t.prototype.getValue=t.prototype.selectedItems;n.fn.tree=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.tree"),o=typeof i=="object"&&i;f||e.data("fu.tree",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.tree.defaults={dataSource:function(){},multiSelect:!1,cacheItems:!0,folderSelect:!0,itemSelect:!0,disclosuresUpperLimit:0};n.fn.tree.Constructor=t;n.fn.tree.noConflict=function(){return n.fn.tree=u,this}}(n),function(n){var i=n.fn.wizard,t=function(t,i){var r;this.$element=n(t);this.options=n.extend({},n.fn.wizard.defaults,i);this.options.disablePreviousStep=this.$element.attr("data-restrict")==="previous"?!0:this.options.disablePreviousStep;this.currentStep=this.options.selectedItem.step;this.numSteps=this.$element.find(".steps li").length;this.$prevBtn=this.$element.find("button.btn-prev");this.$nextBtn=this.$element.find("button.btn-next");this.$element.children(".steps-container").length===0&&(this.$element.addClass("no-steps-container"),window&&window.console&&window.console.warn&&window.console.warn('please update your wizard markup to include ".steps-container" as seen in http://getfuelux.com/javascript.html#wizard-usage-markup'));r=this.$nextBtn.children().detach();this.nextText=n.trim(this.$nextBtn.text());this.$nextBtn.append(r);this.$prevBtn.on("click.fu.wizard",n.proxy(this.previous,this));this.$nextBtn.on("click.fu.wizard",n.proxy(this.next,this));this.$element.on("click.fu.wizard","li.complete",n.proxy(this.stepclicked,this));this.selectedItem(this.options.selectedItem);this.options.disablePreviousStep&&(this.$prevBtn.attr("disabled",!0),this.$element.find(".steps").addClass("previous-disabled"))};t.prototype={constructor:t,destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},addSteps:function(t){var i=[].slice.call(arguments).slice(1),o=this.$element.find(".steps"),s=this.$element.find(".step-content"),r,h,e,c,u,f;for(t=t===-1||t>this.numSteps+1?this.numSteps+1:t,i[0]instanceof Array&&(i=i[0]),u=o.find("li:nth-child("+t+")"),c=s.find(".step-pane:nth-child("+t+")"),u.length<1&&(u=null),r=0,h=i.length;r<h;r++)f=n('<li data-step="'+t+'"><span class="badge badge-info"><\/span><\/li>'),f.append(i[r].label||"").append('<span class="chevron"><\/span>'),f.find(".badge").append(i[r].badge||t),e=n('<div class="step-pane" data-step="'+t+'"><\/div>'),e.append(i[r].pane||""),u?(u.before(f),c.before(e)):(o.append(f),s.append(e)),t++;this.syncSteps();this.numSteps=o.find("li").length;this.setState()},removeSteps:function(t,i){var f="nextAll",e=0,r=this.$element.find(".steps"),o=this.$element.find(".step-content"),u;i=i!==undefined?i:1;t>r.find("li").length?u=r.find("li:last"):(u=r.find("li:nth-child("+t+")").prev(),u.length<1&&(f="children",u=r));u[f]().each(function(){var t=n(this),r=t.attr("data-step");if(e<i)t.remove(),o.find('.step-pane[data-step="'+r+'"]:first').remove();else return!1;e++});this.syncSteps();this.numSteps=r.find("li").length;this.setState()},setState:function(){var p=this.currentStep>1,w=this.currentStep===1,b=this.currentStep===this.numSteps,f,e,c,o,l,s,a,i,h,v,r,u,t,y;this.options.disablePreviousStep||this.$prevBtn.attr("disabled",w===!0||p===!1);f=this.$nextBtn.attr("data-last");f&&(this.lastText=f,e=this.nextText,b===!0?(e=this.lastText,this.$element.addClass("complete")):this.$element.removeClass("complete"),c=this.$nextBtn.children().detach(),this.$nextBtn.text(e).append(c));o=this.$element.find(".steps li");o.removeClass("active").removeClass("complete");o.find("span.badge").removeClass("badge-info").removeClass("badge-success");l=".steps li:lt("+(this.currentStep-1)+")";s=this.$element.find(l);s.addClass("complete");s.find("span.badge").addClass("badge-success");a=".steps li:eq("+(this.currentStep-1)+")";i=this.$element.find(a);i.addClass("active");i.find("span.badge").addClass("badge-info");h=this.$element.find(".step-content");v=i.attr("data-step");h.find(".step-pane").removeClass("active");h.find('.step-pane[data-step="'+v+'"]:first').addClass("active");this.$element.find(".steps").first().attr("style","margin-left: 0");r=0;this.$element.find(".steps > li").each(function(){r+=n(this).outerWidth()});u=0;u=this.$element.find(".actions").length?this.$element.width()-this.$element.find(".actions").first().outerWidth():this.$element.width();r>u&&(t=r-u,this.$element.find(".steps").first().attr("style","margin-left: -"+t+"px"),this.$element.find("li.active").first().position().left<200&&(t+=this.$element.find("li.active").first().position().left-200,t<1?this.$element.find(".steps").first().attr("style","margin-left: 0"):this.$element.find(".steps").first().attr("style","margin-left: -"+t+"px")));typeof this.initialized!="undefined"&&(y=n.Event("changed.fu.wizard"),this.$element.trigger(y,{step:this.currentStep}));this.initialized=!0},stepclicked:function(t){var u=n(t.currentTarget),i=this.$element.find(".steps li").index(u),r;i<this.currentStep&&this.options.disablePreviousStep||(r=n.Event("stepclicked.fu.wizard"),this.$element.trigger(r,{step:i+1}),r.isDefaultPrevented())||(this.currentStep=i+1,this.setState())},syncSteps:function(){var t=1,i=this.$element.find(".steps"),r=this.$element.find(".step-content");i.children().each(function(){var i=n(this),u=i.find(".badge"),f=i.attr("data-step");isNaN(parseInt(u.html(),10))||u.html(t);i.attr("data-step",t);r.find('.step-pane[data-step="'+f+'"]:last').attr("data-step",t);t++})},previous:function(){var t,i;this.options.disablePreviousStep||this.currentStep===1||(t=n.Event("actionclicked.fu.wizard"),this.$element.trigger(t,{step:this.currentStep,direction:"previous"}),t.isDefaultPrevented())||(this.currentStep-=1,this.setState(),this.$prevBtn.is(":focus")&&(i=this.$element.find(".active").find("input, select, textarea")[0],typeof i!="undefined"?n(i).focus():this.$element.find(".active input:first").length===0&&this.$prevBtn.is(":disabled")&&this.$nextBtn.focus()))},next:function(){var i=n.Event("actionclicked.fu.wizard"),t;(this.$element.trigger(i,{step:this.currentStep,direction:"next"}),i.isDefaultPrevented())||(this.currentStep<this.numSteps?(this.currentStep+=1,this.setState()):this.$element.trigger("finished.fu.wizard"),this.$nextBtn.is(":focus")&&(t=this.$element.find(".active").find("input, select, textarea")[0],typeof t!="undefined"?n(t).focus():this.$element.find(".active input:first").length===0&&this.$nextBtn.is(":disabled")&&this.$prevBtn.focus()))},selectedItem:function(n){var i,t;return n?(t=n.step||-1,t=Number(this.$element.find('.steps li[data-name="'+t+'"]').first().attr("data-step"))||Number(t),1<=t&&t<=this.numSteps?(this.currentStep=t,this.setState()):(t=this.$element.find(".steps li.active:first").attr("data-step"),isNaN(t)||(this.currentStep=parseInt(t,10),this.setState())),i=this):(i={step:this.currentStep},this.$element.find(".steps li.active:first[data-name]").length&&(i.stepname=this.$element.find(".steps li.active:first").attr("data-name"))),i}};n.fn.wizard=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.wizard"),o=typeof i=="object"&&i;f||e.data("fu.wizard",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.wizard.defaults={disablePreviousStep:!1,selectedItem:{step:-1}};n.fn.wizard.Constructor=t;n.fn.wizard.noConflict=function(){return n.fn.wizard=i,this};n(document).on("mouseover.fu.wizard.data-api","[data-initialize=wizard]",function(t){var i=n(t.target).closest(".wizard");i.data("fu.wizard")||i.wizard(i.data())});n(function(){n("[data-initialize=wizard]").each(function(){var t=n(this);t.data("fu.wizard")||t.wizard(t.data())})})}(n),function(n){var i=n.fn.infinitescroll,t=function(t,i){this.$element=n(t);this.$element.addClass("infinitescroll");this.options=n.extend({},n.fn.infinitescroll.defaults,i);this.curScrollTop=this.$element.scrollTop();this.curPercentage=this.getPercentage();this.fetchingData=!1;this.$element.on("scroll.fu.infinitescroll",n.proxy(this.onScroll,this));this.onScroll()};t.prototype={constructor:t,destroy:function(){return this.$element.remove(),this.$element.empty(),this.$element[0].outerHTML},disable:function(){this.$element.off("scroll.fu.infinitescroll")},enable:function(){this.$element.on("scroll.fu.infinitescroll",n.proxy(this.onScroll,this))},end:function(t){var i=n('<div class="infinitescroll-end"><\/div>');t?i.append(t):i.append("---------");this.$element.append(i);this.disable()},getPercentage:function(){var n=this.$element.css("box-sizing")==="border-box"?this.$element.outerHeight():this.$element.height(),t=this.$element.get(0).scrollHeight;return t>n?n/(t-this.curScrollTop)*100:0},fetchData:function(t){var u=n('<div class="infinitescroll-load"><\/div>'),i=this,r,f=function(){var r={percentage:i.curPercentage,scrollTop:i.curScrollTop},t=n('<div class="loader"><\/div>');u.append(t);t.loader();i.options.dataSource&&i.options.dataSource(r,function(n){var t;u.remove();n.content&&i.$element.append(n.content);n.end&&(t=n.end!==!0?n.end:undefined,i.end(t));i.fetchingData=!1})};if(this.fetchingData=!0,this.$element.append(u),this.options.hybrid&&t!==!0){r=n('<button type="button" class="btn btn-primary"><\/button>');typeof this.options.hybrid=="object"?r.append(this.options.hybrid.label):r.append('<span class="glyphicon glyphicon-repeat"><\/span>');r.on("click.fu.infinitescroll",function(){r.remove();f()});u.append(r)}else f()},onScroll:function(){this.curScrollTop=this.$element.scrollTop();this.curPercentage=this.getPercentage();!this.fetchingData&&this.curPercentage>=this.options.percentage&&this.fetchData()}};n.fn.infinitescroll=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.infinitescroll"),o=typeof i=="object"&&i;f||e.data("fu.infinitescroll",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.infinitescroll.defaults={dataSource:null,hybrid:!1,percentage:95};n.fn.infinitescroll.Constructor=t;n.fn.infinitescroll.noConflict=function(){return n.fn.infinitescroll=i,this}}(n),function(n){var i=n.fn.pillbox,t=function(t,i){this.$element=n(t);this.$moreCount=this.$element.find(".pillbox-more-count");this.$pillGroup=this.$element.find(".pill-group");this.$addItem=this.$element.find(".pillbox-add-item");this.$addItemWrap=this.$addItem.parent();this.$suggest=this.$element.find(".suggest");this.$pillHTML='<li class="btn btn-default pill">\t<span><\/span>\t<span class="glyphicon glyphicon-close">\t\t<span class="sr-only">Remove<\/span>\t<\/span><\/li>';this.options=n.extend({},n.fn.pillbox.defaults,i);this.options.readonly===-1?this.$element.attr("data-readonly")!==undefined&&this.readonly(!0):this.options.readonly&&this.readonly(!0);this.acceptKeyCodes=this._generateObject(this.options.acceptKeyCodes);this.$element.on("click.fu.pillbox",".pill-group > .pill",n.proxy(this.itemClicked,this));this.$element.on("click.fu.pillbox",n.proxy(this.inputFocus,this));this.$element.on("keydown.fu.pillbox",".pillbox-add-item",n.proxy(this.inputEvent,this));if(this.options.onKeyDown)this.$element.on("mousedown.fu.pillbox",".suggest > li",n.proxy(this.suggestionClick,this));if(this.options.edit){this.$element.addClass("pills-editable");this.$element.on("blur.fu.pillbox",".pillbox-add-item",n.proxy(this.cancelEdit,this))}};t.prototype={constructor:t,destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},items:function(){var t=this;return this.$pillGroup.children(".pill").map(function(){return t.getItemData(n(this))}).get()},itemClicked:function(t){var u=this,r=n(t.target),i;if(t.preventDefault(),t.stopPropagation(),this._closeSuggestions(),r.hasClass("pill"))i=r;else if(i=r.parent(),this.$element.attr("data-readonly")===undefined){if(r.hasClass("glyphicon-close")){if(this.options.onRemove)this.options.onRemove(this.getItemData(i,{el:i}),n.proxy(this._removeElement,this));else this._removeElement(this.getItemData(i,{el:i}));return!1}if(this.options.edit){if(i.find(".pillbox-list-edit").length)return!1;this.openEdit(i)}}this.$element.trigger("clicked.fu.pillbox",this.getItemData(i))},readonly:function(n){n?this.$element.attr("data-readonly","readonly"):this.$element.removeAttr("data-readonly");this.options.truncate&&this.truncate(n)},suggestionClick:function(t){var i=n(t.currentTarget),r={text:i.html(),value:i.data("value")};t.preventDefault();this.$addItem.val("");i.data("attr")&&(r.attr=JSON.parse(i.data("attr")));r.data=i.data("data");this.addItems(r,!0);this._closeSuggestions()},itemCount:function(){return this.$pillGroup.children(".pill").length},addItems:function(){var i=this,t,u,r;if(!isFinite(String(arguments[0]))||arguments[0]instanceof Array?(t=[].slice.call(arguments).slice(0),r=t[1]&&!t[1].text):(t=[].slice.call(arguments).slice(1),u=arguments[0]),t[0]instanceof Array&&(t=t[0]),t.length)if(n.each(t,function(n,r){var u={text:r.text,value:r.value?r.value:r.text,el:i.$pillHTML};r.attr&&(u.attr=r.attr);r.data&&(u.data=r.data);t[n]=u}),this.options.edit&&this.currentEdit&&(t[0].el=this.currentEdit.wrap("<div><\/div>").parent().html()),r&&t.pop(1),i.options.onAdd&&r)if(this.options.edit&&this.currentEdit)i.options.onAdd(t[0],n.proxy(i.saveEdit,this));else i.options.onAdd(t[0],n.proxy(i.placeItems,this));else this.options.edit&&this.currentEdit?i.saveEdit(t):u?i.placeItems(u,t):i.placeItems(t,r)},removeItems:function(n,t){var u=this,i,r;if(n)for(t=t?t:1,i=0;i<t;i++)if(r=u.$pillGroup.find("> .pill:nth-child("+n+")"),r)r.remove();else break;else this.$pillGroup.find(".pill").remove(),this._removePillTrigger({method:"removeAll"})},placeItems:function(){var i=[],t,r,u,f;!isFinite(String(arguments[0]))||arguments[0]instanceof Array?(t=[].slice.call(arguments).slice(0),f=t[1]&&!t[1].text):(t=[].slice.call(arguments).slice(1),r=arguments[0]);t[0]instanceof Array&&(t=t[0]);t.length&&(n.each(t,function(t,r){var u=n(r.el);u.attr("data-value",r.value);u.find("span:first").html(r.text);r.attr&&n.each(r.attr,function(n,t){n==="cssClass"||n==="class"?u.addClass(t):u.attr(n,t)});r.data&&u.data("data",r.data);i.push(u)}),this.$pillGroup.children(".pill").length>0?r?(u=this.$pillGroup.find(".pill:nth-child("+r+")"),u.length?u.before(i):this.$pillGroup.children(".pill:last").after(i)):this.$pillGroup.children(".pill:last").after(i):this.$pillGroup.prepend(i),f&&this.$element.trigger("added.fu.pillbox",{text:t[0].text,value:t[0].value}))},inputEvent:function(n){var e=this,t=this.$addItem.val(),u,f,i,r;if(this.acceptKeyCodes[n.keyCode])return this.options.onKeyDown&&this._isSuggestionsOpen()&&(r=this.$suggest.find(".pillbox-suggest-sel"),r.length&&(t=r.html(),u=r.data("value"),f=r.data("attr"))),(t.replace(/[ ]*\,[ ]*/,"").match(/\S/)||this.options.allowEmptyPills&&t.length)&&(this._closeSuggestions(),this.$addItem.hide(),f?this.addItems({text:t,value:u,attr:JSON.parse(f)},!0):this.addItems({text:t,value:u},!0),setTimeout(function(){e.$addItem.show().val("").attr({size:10})},0)),n.preventDefault(),!0;if(n.keyCode===8||n.keyCode===46){if(!t.length)return(n.preventDefault(),this.options.edit&&this.currentEdit)?(this.cancelEdit(),!0):(this._closeSuggestions(),i=this.$pillGroup.children(".pill:last"),i.hasClass("pillbox-highlight")?this._removeElement(this.getItemData(i,{el:i})):i.addClass("pillbox-highlight"),!0)}else t.length>10&&this.$addItem.width()<this.$pillGroup.width()-6&&this.$addItem.attr({size:t.length+3});if(this.$pillGroup.find(".pill").removeClass("pillbox-highlight"),this.options.onKeyDown){if(n.keyCode===9||n.keyCode===38||n.keyCode===40)return this._isSuggestionsOpen()&&this._keySuggestions(n),!0;this.callbackId=n.timeStamp;this.options.onKeyDown({event:n,value:t},function(t){e._openSuggestions(n,t)})}},openEdit:function(n){var i=n.index()+1,t=this.$addItemWrap.detach().hide();this.$pillGroup.find(".pill:nth-child("+i+")").before(t);this.currentEdit=n.detach();t.addClass("editing");this.$addItem.val(n.find("span:first").html());t.show();this.$addItem.focus().select()},cancelEdit:function(n){var t;if(!this.currentEdit)return!1;this._closeSuggestions();n&&this.$addItemWrap.before(this.currentEdit);this.currentEdit=!1;t=this.$addItemWrap.detach();t.removeClass("editing");this.$addItem.val("");this.$pillGroup.append(t)},saveEdit:function(){var t=arguments[0][0]?arguments[0][0]:arguments[0];this.currentEdit=n(t.el);this.currentEdit.data("value",t.value);this.currentEdit.find("span:first").html(t.text);this.$addItemWrap.hide();this.$addItemWrap.before(this.currentEdit);this.currentEdit=!1;this.$addItem.val("");this.$addItemWrap.removeClass("editing");this.$pillGroup.append(this.$addItemWrap.detach().show());this.$element.trigger("edited.fu.pillbox",{value:t.value,text:t.text})},removeBySelector:function(){var t=[].slice.call(arguments).slice(0),i=this;n.each(t,function(n,t){i.$pillGroup.find(t).remove()});this._removePillTrigger({method:"removeBySelector",removedSelectors:t})},removeByValue:function(){var t=[].slice.call(arguments).slice(0),i=this;n.each(t,function(n,t){i.$pillGroup.find('> .pill[data-value="'+t+'"]').remove()});this._removePillTrigger({method:"removeByValue",removedValues:t})},removeByText:function(){var t=[].slice.call(arguments).slice(0),i=this;n.each(t,function(n,t){i.$pillGroup.find('> .pill:contains("'+t+'")').remove()});this._removePillTrigger({method:"removeByText",removedText:t})},truncate:function(t){var u=this,o,f,i,r,e;this.$element.removeClass("truncate");this.$addItemWrap.removeClass("truncated");this.$pillGroup.find(".pill").removeClass("truncated");t&&(this.$element.addClass("truncate"),o=this.$element.width(),f=!1,i=0,r=this.$pillGroup.find(".pill").length,e=0,this.$pillGroup.find(".pill").each(function(){var t=n(this);f?t.addClass("truncated"):(i++,u.$moreCount.text(r-i),e+t.outerWidth(!0)+u.$addItemWrap.outerWidth(!0)<=o?e+=t.outerWidth(!0):(u.$moreCount.text(r-i+1),t.addClass("truncated"),f=!0))}),i===r&&this.$addItemWrap.addClass("truncated"))},inputFocus:function(){this.$element.find(".pillbox-add-item").focus()},getItemData:function(t,i){return n.extend({text:t.find("span:first").html()},t.data(),i)},_removeElement:function(n){n.el.remove();delete n.el;this.$element.trigger("removed.fu.pillbox",n)},_removePillTrigger:function(n){this.$element.trigger("removed.fu.pillbox",n)},_generateObject:function(t){var i={};return n.each(t,function(n,t){i[t]=!0}),i},_openSuggestions:function(t,i){var r=n("<ul>");if(this.callbackId!==t.timeStamp)return!1;i.data&&i.data.length&&(n.each(i.data,function(t,i){var f=i.value?i.value:i.text,u=n('<li data-value="'+f+'">'+i.text+"<\/li>");i.attr&&u.data("attr",JSON.stringify(i.attr));i.data&&u.data("data",i.data);r.append(u)}),this.$suggest.html("").append(r.children()),n(document.body).trigger("suggested.fu.pillbox",this.$suggest))},_closeSuggestions:function(){this.$suggest.html("").parent().removeClass("open")},_isSuggestionsOpen:function(){return this.$suggest.parent().hasClass("open")},_keySuggestions:function(n){var t=this.$suggest.find("li.pillbox-suggest-sel"),r=n.keyCode===38,i;n.preventDefault();t.length?(i=r?t.prev():t.next(),i.length||(i=r?this.$suggest.find("li:last"):this.$suggest.find("li:first")),i&&(i.addClass("pillbox-suggest-sel"),t.removeClass("pillbox-suggest-sel"))):(t=this.$suggest.find("li:first"),t.addClass("pillbox-suggest-sel"))}};t.prototype.getValue=t.prototype.items;n.fn.pillbox=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.pillbox"),o=typeof i=="object"&&i;f||e.data("fu.pillbox",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.pillbox.defaults={onAdd:undefined,onRemove:undefined,onKeyDown:undefined,edit:!1,readonly:-1,truncate:!1,acceptKeyCodes:[13,188],allowEmptyPills:!1};n.fn.pillbox.Constructor=t;n.fn.pillbox.noConflict=function(){return n.fn.pillbox=i,this};n(document).on("mousedown.fu.pillbox.data-api","[data-initialize=pillbox]",function(t){var i=n(t.target).closest(".pillbox");i.data("fu.pillbox")||i.pillbox(i.data())});n(function(){n("[data-initialize=pillbox]").each(function(){var t=n(this);t.data("fu.pillbox")||t.pillbox(t.data())})})}(n),function(n){var i=n.fn.repeater,t=function(t,i){var r=this,f,u;this.$element=n(t);this.$canvas=this.$element.find(".repeater-canvas");this.$count=this.$element.find(".repeater-count");this.$end=this.$element.find(".repeater-end");this.$filters=this.$element.find(".repeater-filters");this.$loader=this.$element.find(".repeater-loader");this.$pageSize=this.$element.find(".repeater-itemization .selectlist");this.$nextBtn=this.$element.find(".repeater-next");this.$pages=this.$element.find(".repeater-pages");this.$prevBtn=this.$element.find(".repeater-prev");this.$primaryPaging=this.$element.find(".repeater-primaryPaging");this.$search=this.$element.find(".repeater-search").find(".search");this.$secondaryPaging=this.$element.find(".repeater-secondaryPaging");this.$start=this.$element.find(".repeater-start");this.$viewport=this.$element.find(".repeater-viewport");this.$views=this.$element.find(".repeater-views");this.currentPage=0;this.currentView=null;this.isDisabled=!1;this.infiniteScrollingCallback=function(){};this.infiniteScrollingCont=null;this.infiniteScrollingEnabled=!1;this.infiniteScrollingEnd=null;this.infiniteScrollingOptions={};this.lastPageInput=0;this.options=n.extend({},n.fn.repeater.defaults,i);this.pageIncrement=0;this.resizeTimeout={};this.stamp=(new Date).getTime()+(Math.floor(Math.random()*100)+1);this.storedDataSourceOpts=null;this.syncingViewButtonState=!1;this.viewOptions={};this.viewType=null;this.$filters.selectlist();this.$pageSize.selectlist();this.$primaryPaging.find(".combobox").combobox();this.$search.search({searchOnKeyPress:this.options.searchOnKeyPress,allowCancel:this.options.allowCancel});this.$filters.on("changed.fu.selectlist",function(n,t){r.$element.trigger("filtered.fu.repeater",t);r.render({clearInfinite:!0,pageIncrement:null})});this.$nextBtn.on("click.fu.repeater",n.proxy(this.next,this));this.$pageSize.on("changed.fu.selectlist",function(n,t){r.$element.trigger("pageSizeChanged.fu.repeater",t);r.render({pageIncrement:null})});this.$prevBtn.on("click.fu.repeater",n.proxy(this.previous,this));this.$primaryPaging.find(".combobox").on("changed.fu.combobox",function(n,t){r.pageInputChange(t.text,t)});this.$search.on("searched.fu.search cleared.fu.search",function(n,t){r.$element.trigger("searchChanged.fu.repeater",t);r.render({clearInfinite:!0,pageIncrement:null})});this.$search.on("canceled.fu.search",function(n,t){r.$element.trigger("canceled.fu.repeater",t);r.render({clearInfinite:!0,pageIncrement:null})});this.$secondaryPaging.on("blur.fu.repeater",function(){r.pageInputChange(r.$secondaryPaging.val())});this.$secondaryPaging.on("keyup",function(n){n.keyCode===13&&r.pageInputChange(r.$secondaryPaging.val())});this.$views.find("input").on("change.fu.repeater",n.proxy(this.viewChanged,this));n(window).on("resize.fu.repeater."+this.stamp,function(){clearTimeout(r.resizeTimeout);r.resizeTimeout=setTimeout(function(){r.resize();r.$element.trigger("resized.fu.repeater")},75)});this.$loader.loader();this.$loader.loader("pause");this.options.defaultView!==-1?u=this.options.defaultView:(f=this.$views.find("label.active input"),u=f.length>0?f.val():"list");this.setViewOptions(u);this.initViewTypes(function(){r.resize();r.$element.trigger("resized.fu.repeater");r.render({changeView:u})})};t.prototype={constructor:t,clear:function(t){function u(t){var i=[];t.children().each(function(){var t=n(this),r=t.attr("data-preserve");r==="deep"?(t.detach(),i.push(t)):r==="shallow"&&(u(t),t.detach(),i.push(t))});t.empty();t.append(i)}var r,i;t=t||{};t.preserve?(!this.infiniteScrollingEnabled||t.clearInfinite)&&u(this.$canvas):this.$canvas.empty();r=t.viewChanged!==undefined?t.viewChanged:!1;i=n.fn.repeater.viewTypes[this.viewType]||{};!r&&i.cleared&&i.cleared.call(this,{options:t})},clearPreservedDataSourceOptions:function(){this.storedDataSourceOpts=null},destroy:function(){var t;return this.$element.find("input").each(function(){n(this).attr("value",n(this).val())}),this.$canvas.empty(),t=this.$element[0].outerHTML,this.$element.find(".combobox").combobox("destroy"),this.$element.find(".selectlist").selectlist("destroy"),this.$element.find(".search").search("destroy"),this.infiniteScrollingEnabled&&n(this.infiniteScrollingCont).infinitescroll("destroy"),this.$element.remove(),n(window).off("resize.fu.repeater."+this.stamp),t},disable:function(){var i="disable",t="disabled",r=n.fn.repeater.viewTypes[this.viewType]||{};this.$search.search(i);this.$filters.selectlist(i);this.$views.find("label, input").addClass(t).attr(t,t);this.$pageSize.selectlist(i);this.$primaryPaging.find(".combobox").combobox(i);this.$secondaryPaging.attr(t,t);this.$prevBtn.attr(t,t);this.$nextBtn.attr(t,t);r.enabled&&r.enabled.call(this,{status:!1});this.isDisabled=!0;this.$element.addClass("disabled");this.$element.trigger("disabled.fu.repeater")},enable:function(){var t="disabled",r="enable",i="page-end",u=n.fn.repeater.viewTypes[this.viewType]||{};this.$search.search(r);this.$filters.selectlist(r);this.$views.find("label, input").removeClass(t).removeAttr(t);this.$pageSize.selectlist("enable");this.$primaryPaging.find(".combobox").combobox(r);this.$secondaryPaging.removeAttr(t);this.$prevBtn.hasClass(i)||this.$prevBtn.removeAttr(t);this.$nextBtn.hasClass(i)||this.$nextBtn.removeAttr(t);this.$prevBtn.hasClass(i)&&this.$nextBtn.hasClass(i)&&this.$primaryPaging.combobox("disable");parseInt(this.$count.html())!==0?this.$pageSize.selectlist("enable"):this.$pageSize.selectlist("disable");u.enabled&&u.enabled.call(this,{status:!0});this.isDisabled=!1;this.$element.removeClass("disabled");this.$element.trigger("enabled.fu.repeater")},getDataOptions:function(t){var r={},i={},f,u;return t=t||{},i.filter=this.$filters.length>0?this.$filters.selectlist("selectedItem"):{text:"All",value:"all"},i.view=this.currentView,this.infiniteScrollingEnabled||(i.pageSize=this.$pageSize.length>0?parseInt(this.$pageSize.selectlist("selectedItem").value,10):25),t.pageIncrement!==undefined&&(t.pageIncrement===null?this.currentPage=0:this.currentPage+=t.pageIncrement),i.pageIndex=this.currentPage,f=this.$search.length>0?this.$search.find("input").val():"",f!==""&&(i.search=f),t.dataSourceOptions&&(r=t.dataSourceOptions,t.preserveDataSourceOptions&&(this.storedDataSourceOpts=this.storedDataSourceOpts?n.extend(this.storedDataSourceOpts,r):r)),this.storedDataSourceOpts&&(r=n.extend(this.storedDataSourceOpts,r)),u=n.fn.repeater.viewTypes[this.viewType]||{},u=u.dataOptions,u?(u=u.call(this,i),i=n.extend(u,r)):i=n.extend(i,r),i},infiniteScrolling:function(n,t){var i=this.$element.find(".repeater-footer"),r=this.$element.find(".repeater-viewport"),u,f;t=t||{};n?(this.infiniteScrollingEnabled=!0,this.infiniteScrollingEnd=t.end,delete t.dataSource,delete t.end,this.infiniteScrollingOptions=t,r.css({height:r.height()+i.outerHeight()}),i.hide()):(u=this.infiniteScrollingCont,f=u.data(),delete f.infinitescroll,u.off("scroll"),u.removeClass("infinitescroll"),this.infiniteScrollingCont=null,this.infiniteScrollingEnabled=!1,this.infiniteScrollingEnd=null,this.infiniteScrollingOptions={},r.css({height:r.height()-i.outerHeight()}),i.show())},infiniteScrollPaging:function(n){var i=this.infiniteScrollingEnd!==!0?this.infiniteScrollingEnd:undefined,t=n.page,r=n.pages;this.currentPage=t!==undefined?t:NaN;(n.end===!0||this.currentPage+1>=r)&&this.infiniteScrollingCont.infinitescroll("end",i)},initInfiniteScrolling:function(){var t=this.$canvas.find('[data-infinite="true"]:first'),i,r;t=t.length<1?this.$canvas:t;t.data("fu.infinitescroll")?t.infinitescroll("enable"):(r=this,i=n.extend({},this.infiniteScrollingOptions),i.dataSource=function(n,t){r.infiniteScrollingCallback=t;r.render({pageIncrement:1})},t.infinitescroll(i),this.infiniteScrollingCont=t)},initViewTypes:function(t){function f(n){function u(){n++;n<r?f(n):t()}i[n].initialize?i[n].initialize.call(e,{},function(){u()}):u()}var e=this,i=[],u,r;for(u in n.fn.repeater.viewTypes)i.push(n.fn.repeater.viewTypes[u]);r=i.length;r>0?f(0):t()},itemization:function(n){this.$count.html(n.count!==undefined?n.count:"?");this.$end.html(n.end!==undefined?n.end:"?");this.$start.html(n.start!==undefined?n.start:"?")},next:function(){var n="disabled";this.$nextBtn.attr(n,n);this.$prevBtn.attr(n,n);this.pageIncrement=1;this.$element.trigger("nextClicked.fu.repeater");this.render({pageIncrement:this.pageIncrement})},pageInputChange:function(n,t){var i;n!==this.lastPageInput&&(this.lastPageInput=n,n=parseInt(n,10)-1,i=n-this.currentPage,this.$element.trigger("pageChanged.fu.repeater",[n,t]),this.render({pageIncrement:i}))},pagination:function(n){var r="active",t="disabled",h=n.page,u="page-end",i=n.pages,e,f,o,s;if(this.currentPage=h!==undefined?h:NaN,this.$primaryPaging.removeClass(r),this.$secondaryPaging.removeClass(r),s=i===0?0:this.currentPage+1,i<=this.viewOptions.dropPagingCap){for(this.$primaryPaging.addClass(r),e=this.$primaryPaging.find(".dropdown-menu"),e.empty(),f=0;f<i;f++)o=f+1,e.append('<li data-value="'+o+'"><a href="#">'+o+"<\/a><\/li>");this.$primaryPaging.find("input.form-control").val(s)}else this.$secondaryPaging.addClass(r),this.$secondaryPaging.val(s);this.lastPageInput=this.currentPage+1+"";this.$pages.html(""+i);this.currentPage+1<i?(this.$nextBtn.removeAttr(t),this.$nextBtn.removeClass(u)):(this.$nextBtn.attr(t,t),this.$nextBtn.addClass(u));this.currentPage-1>=0?(this.$prevBtn.removeAttr(t),this.$prevBtn.removeClass(u)):(this.$prevBtn.attr(t,t),this.$prevBtn.addClass(u));this.pageIncrement!==0&&(this.pageIncrement>0?this.$nextBtn.is(":disabled")?this.$prevBtn.focus():this.$nextBtn.focus():this.$prevBtn.is(":disabled")?this.$nextBtn.focus():this.$prevBtn.focus())},previous:function(){var n="disabled";this.$nextBtn.attr(n,n);this.$prevBtn.attr(n,n);this.pageIncrement=-1;this.$element.trigger("previousClicked.fu.repeater");this.render({pageIncrement:this.pageIncrement})},render:function(t){var i=this,r=!1,u=n.fn.repeater.viewTypes[this.viewType]||{},f,e;t=t||{};this.disable();t.changeView&&this.currentView!==t.changeView&&(e=this.currentView,this.currentView=t.changeView,this.viewType=this.currentView.split(".")[0],this.setViewOptions(this.currentView),this.$element.attr("data-currentview",this.currentView),this.$element.attr("data-viewtype",this.viewType),r=!0,t.viewChanged=r,this.$element.trigger("viewChanged.fu.repeater",this.currentView),this.infiniteScrollingEnabled&&i.infiniteScrolling(!1),u=n.fn.repeater.viewTypes[this.viewType]||{},u.selected&&u.selected.call(this,{prevView:e}));this.syncViewButtonState();t.preserve=t.preserve!==undefined?t.preserve:!r;this.clear(t);(!this.infiniteScrollingEnabled||this.infiniteScrollingEnabled&&r)&&this.$loader.show().loader("play");f=this.getDataOptions(t);this.viewOptions.dataSource(f,function(n){n=n||{};i.infiniteScrollingEnabled?i.infiniteScrollingCallback({}):(i.itemization(n),i.pagination(n));i.runRenderer(u,n,function(){i.infiniteScrollingEnabled&&((r||t.clearInfinite)&&i.initInfiniteScrolling(),i.infiniteScrollPaging(n,t));i.$loader.hide().loader("pause");i.enable();i.$search.trigger("rendered.fu.repeater");i.$element.trigger("rendered.fu.repeater",{data:n,options:f,renderOptions:t});i.$element.trigger("loaded.fu.repeater",f)})})},resize:function(){var t=this.viewOptions.staticHeight===-1?this.$element.attr("data-staticheight"):this.viewOptions.staticHeight,r={},u,i;if(this.viewType&&(r=n.fn.repeater.viewTypes[this.viewType]||{}),t!==undefined&&t!==!1&&t!=="false"){this.$canvas.addClass("scrolling");i={bottom:this.$viewport.css("margin-bottom"),top:this.$viewport.css("margin-top")};var f=t==="true"||t===!0?this.$element.height():parseInt(t,10),e=this.$element.find(".repeater-header").outerHeight(),o=this.$element.find(".repeater-footer").outerHeight(),s=i.bottom==="auto"?0:parseInt(i.bottom,10),h=i.top==="auto"?0:parseInt(i.top,10);u=f-e-o-s-h;this.$viewport.outerHeight(u)}else this.$canvas.removeClass("scrolling");r.resize&&r.resize.call(this,{height:this.$element.outerHeight(),width:this.$element.outerWidth()})},runRenderer:function(t,i,r){function c(t,i){var r;i&&(r=i.action?i.action:"append",r!=="none"&&i.item!==undefined&&(t=i.container!==undefined?n(i.container):t,t[r](i.item)))}var o,f,h,s,u,e;if(t.render)t.render.call(this,{container:this.$canvas,data:i},function(){r()});else{if(t.before&&(s=t.before.call(this,{container:this.$canvas,data:i}),c(this.$canvas,s)),o=this.$canvas.find('[data-container="true"]:last'),o=o.length>0?o:this.$canvas,t.renderItem){for(u=t.repeat||"data.items",u=u.split("."),u[0]==="data"||u[0]==="this"?(e=u[0]==="this"?this:i,u.shift()):(u=[],e=[],window.console&&window.console.warn&&window.console.warn('WARNING: Repeater plugin "repeat" value must start with either "data" or "this"')),f=0,h=u.length;f<h;f++)if(e[u[f]]!==undefined)e=e[u[f]];else{e=[];window.console&&window.console.warn&&window.console.warn("WARNING: Repeater unable to find property to iterate renderItem on.");break}for(f=0,h=e.length;f<h;f++)s=t.renderItem.call(this,{container:o,data:i,index:f,subset:e}),c(o,s)}t.after&&(s=t.after.call(this,{container:this.$canvas,data:i}),c(this.$canvas,s));r()}},setViewOptions:function(t){var i={},r=t.split(".")[1];i=this.options.views?this.options.views[r]||this.options.views[t]||{}:{};this.viewOptions=n.extend({},this.options,i)},viewChanged:function(t){var i=n(t.target),r=i.val();this.syncingViewButtonState||(this.isDisabled||i.parents("label:first").hasClass("disabled")?this.syncViewButtonState():this.render({changeView:r,pageIncrement:null}))},syncViewButtonState:function(){var n=this.$views.find('input[value="'+this.currentView+'"]');this.syncingViewButtonState=!0;this.$views.find("input").prop("checked",!1);this.$views.find("label.active").removeClass("active");n.length>0&&(n.prop("checked",!0),n.parents("label:first").addClass("active"));this.syncingViewButtonState=!1}};n.fn.repeater=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.repeater"),o=typeof i=="object"&&i;f||e.data("fu.repeater",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.repeater.defaults={dataSource:function(n,t){t({count:0,end:0,items:[],page:0,pages:1,start:0})},defaultView:-1,dropPagingCap:10,staticHeight:-1,views:null,searchOnKeyPress:!1,allowCancel:!0};n.fn.repeater.viewTypes={};n.fn.repeater.Constructor=t;n.fn.repeater.noConflict=function(){return n.fn.repeater=i,this}}(n),function(n){function r(n,t){var i,r;if(!t)return!1;if(!n||t.length!==n.length)return!0;for(i=0;i<t.length;i++)if(n[i]){for(r in t[i])if(n[i][r]!==t[i][r])return!0}else return!0;return!1}function u(t,i,r,u,f){var s=u[f].className,e=i[r][u[f].property],o=n("<td><\/td>"),h=u[f]._auto_width,l=u[f].property,c;this.viewOptions.list_actions!==!1&&l==="@_ACTIONS_@"&&(e='<div class="repeater-list-actions-placeholder" style="width: '+this.list_actions_width+'px"><\/div>');e=e!==undefined?e:"";o.addClass(s!==undefined?s:"").append(e);h!==undefined&&o.outerWidth(h);t.append(o);this.viewOptions.list_selectable==="multi"&&u[f].property==="@_CHECKBOX_@"&&(c='<label data-row="'+r+'" class="checkbox-custom checkbox-inline body-checkbox repeater-select-checkbox"><input class="sr-only" type="checkbox"><\/label>',o.html(c));u[f].property==="@_CHECKBOX_@"||u[f].property==="@_ACTIONS_@"||!this.viewOptions.list_columnRendered||this.viewOptions.list_columnRendered({container:t,columnAttr:u[f].property,item:o,rowData:i[r]},function(){})}function f(t,i,r){var c="glyphicon-chevron-down",p=".glyphicon.rlc:first",l="glyphicon-chevron-up",u=n('<div class="repeater-list-heading"><span class="glyphicon rlc"><\/span><\/div>'),w=(this.$element.attr("id")+"_"||"")+"checkall",b='<div class="repeater-list-heading header-checkbox"><div class="checkbox checkbox-inline"><input type="checkbox" id="'+w+'"><label for="'+w+'"><\/label><\/div><\/div>',e=n("<th><\/th>"),f=this,s,a,h,v,o,y;if(u.data("fu_item_index",r),u.prepend(i[r].label),e.html(u.html()).find("[id]").removeAttr("id"),i[r].property!=="@_CHECKBOX_@"?e.append(u):e.append(b),s=e.add(u),v=u.find(p),o=v.add(e.find(p)),this.viewOptions.list_actions&&i[r].property==="@_ACTIONS_@"&&(y=this.list_actions_width,e.css("width",y),u.css("width",y)),a=i[r].className,a!==undefined&&s.addClass(a),h=i[r].sortable,h){s.addClass("sortable");u.on("click.fu.repeaterList",function(){f.isDisabled||(f.list_sortProperty=typeof h=="string"?h:i[r].property,u.hasClass("sorted")?v.hasClass(l)?(o.removeClass(l).addClass(c),f.list_sortDirection="desc"):f.viewOptions.list_sortClearing?(s.removeClass("sorted"),o.removeClass(c),f.list_sortDirection=null,f.list_sortProperty=null):(o.removeClass(c).addClass(l),f.list_sortDirection="asc"):(t.find("th, .repeater-list-heading").removeClass("sorted"),o.removeClass(c).addClass(l),f.list_sortDirection="asc",s.addClass("sorted")),f.render({clearInfinite:!0,pageIncrement:null}))})}(i[r].sortDirection==="asc"||i[r].sortDirection==="desc")&&(t.find("th, .repeater-list-heading").removeClass("sorted"),s.addClass("sortable sorted"),i[r].sortDirection==="asc"?(o.addClass(l),this.list_sortDirection="asc"):(o.addClass(c),this.list_sortDirection="desc"),this.list_sortProperty=typeof h=="string"?h:i[r].property);t.append(e)}function e(t,r,f){var e=n("<tr><\/tr>"),o=this,s,h,c=this.viewOptions.list_selectable==="multi",l=this.viewOptions.list_actions;if(this.viewOptions.list_selectable&&(e.data("item_data",r[f]),this.viewOptions.list_selectable!=="action")){e.addClass("selectable");e.attr("tabindex",0);e.on("click.fu.repeaterList",function(){var t,r;if(!o.isDisabled){t=n(this);r=n(this).index();r=r+1;var u=o.$element.find(".frozen-column-wrapper tr:nth-child("+r+")"),f=o.$element.find(".actions-column-wrapper tr:nth-child("+r+")"),e=o.$element.find(".frozen-column-wrapper tr:nth-child("+r+") .checkbox-inline");t.is(".selected")?(t.removeClass("selected"),c?(e.click(),u.removeClass("selected"),l&&f.removeClass("selected")):t.find(".repeater-list-check").remove(),o.$element.trigger("deselected.fu.repeaterList",t)):(c?(e.click(),t.addClass("selected"),u.addClass("selected"),l&&f.addClass("selected")):(o.$canvas.find(".repeater-list-check").remove(),o.$canvas.find(".repeater-list tbody tr.selected").each(function(){n(this).removeClass("selected");o.$element.trigger("deselected.fu.repeaterList",n(this))}),t.find("td:first").prepend('<div class="repeater-list-check"><span class="glyphicon glyphicon-ok"><\/span><\/div>'),t.addClass("selected"),u.addClass("selected")),o.$element.trigger("selected.fu.repeaterList",t));i.call(o)}});e.keyup(function(n){n.keyCode===13&&e.trigger("click.fu.repeaterList")})}for(this.viewOptions.list_actions&&!this.viewOptions.list_selectable&&e.data("item_data",r[f]),t.append(e),s=0,h=this.list_columns.length;s<h;s++)u.call(this,e,r,f,this.list_columns,s);this.viewOptions.list_rowRendered&&this.viewOptions.list_rowRendered({container:t,item:e,rowData:r[f]},function(){})}function o(t,i){var u=t.find("tbody"),r;u.length<1&&(u=n('<tbody data-container="true"><\/tbody>'),t.append(u));typeof i.error=="string"&&i.error.length>0?(r=n('<tr class="empty text-danger"><td colspan="'+this.list_columns.length+'"><\/td><\/tr>'),r.find("td").append(i.error),u.append(r)):i.items&&i.items.length<1&&(r=n('<tr class="empty"><td colspan="'+this.list_columns.length+'"><\/td><\/tr>'),r.find("td").append(this.viewOptions.list_noItemsHTML),u.append(r))}function s(i,u){var e=u.columns||[],o=i.find("thead"),s,c,h,l,a,v,y;if(this.list_firstRender||r(this.list_columns,e)||o.length===0){for(o.remove(),this.viewOptions.list_selectable!=="multi"||this.list_noItems||(l={label:"c",property:"@_CHECKBOX_@",sortable:!1},e.splice(0,0,l)),this.list_columns=e,this.list_firstRender=!1,this.$loader.removeClass("noHeader"),this.viewOptions.list_actions&&(a={label:this.viewOptions.list_actions.label||'<span class="actions-hidden">a<\/span>',property:"@_ACTIONS_@",sortable:!1,width:this.list_actions_width},e.push(a)),o=n('<thead data-preserve="deep"><tr><\/tr><\/thead>'),h=o.find("tr"),s=0,c=e.length;s<c;s++)f.call(this,h,e,s);i.prepend(o);this.viewOptions.list_selectable!=="multi"||this.list_noItems||(v=this.$element.find(".repeater-list-wrapper .header-checkbox").outerWidth(),y=n.grep(e,function(n){return n.property==="@_CHECKBOX_@"})[0],y.width=v);t.call(this,h)}}function t(t){var r=[],e=this,i,f,u,o,s;if(this.viewOptions.list_columnSizing&&(i=0,o=0,t.find("th").each(function(){var t=n(this),u,f;e.list_columns[i].width!==undefined?(u=e.list_columns[i].width,t.outerWidth(u),o+=t.outerWidth(),e.list_columns[i]._auto_width=u):(f=t.find(".repeater-list-heading").outerWidth(),r.push({col:t,index:i,minWidth:f}));i++}),f=r.length,f>0))for(s=this.$canvas.find(".repeater-list-wrapper").outerWidth(),u=Math.floor((s-o)/f),i=0;i<f;i++)r[i].minWidth>u&&(u=r[i].minWidth),r[i].col.outerWidth(u),this.list_columns[r[i].index]._auto_width=u}function h(){var n=window.navigator.userAgent,t=n.indexOf("MSIE "),i=n.indexOf("Firefox");return t>0?"ie-"+parseInt(n.substring(t+5,n.indexOf(".",t))):i>0?"firefox":""}function i(){var n=".repeater-list-wrapper > table .selected",t=this.$element.find(".table-actions"),i;this.viewOptions.list_selectable==="action"&&(n=".repeater-list-wrapper > table tr");i=this.$canvas.find(n);i.length>0?t.find("thead .btn").removeAttr("disabled"):t.find("thead .btn").attr("disabled","disabled")}n.fn.repeater&&(n.fn.repeater.Constructor.prototype.list_clearSelectedItems=function(){this.$canvas.find(".repeater-list-check").remove();this.$canvas.find(".repeater-list table tbody tr.selected").removeClass("selected")},n.fn.repeater.Constructor.prototype.list_highlightColumn=function(t,i){var r=this.$canvas.find(".repeater-list-wrapper > table tbody");(this.viewOptions.list_highlightSortedColumn||i)&&(r.find("td.sorted").removeClass("sorted"),r.find("tr").each(function(){var i=n(this).find("td:nth-child("+(t+1)+")").filter(function(){return!n(this).parent().hasClass("empty")});i.addClass("sorted")}))},n.fn.repeater.Constructor.prototype.list_getSelectedItems=function(){var t=[];return this.$canvas.find(".repeater-list .repeater-list-wrapper > table tbody tr.selected").each(function(){var i=n(this);t.push({data:i.data("item_data"),element:i})}),t},n.fn.repeater.Constructor.prototype.getValue=n.fn.repeater.Constructor.prototype.list_getSelectedItems,n.fn.repeater.Constructor.prototype.list_positionHeadings=function(){var t=this.$element.find(".repeater-list-wrapper"),i=t.offset().left,r=t.scrollLeft();r>0?t.find(".repeater-list-heading").each(function(){var t=n(this),r=t.parents("th:first").offset().left-i+"px";t.addClass("shifted").css("left",r)}):t.find(".repeater-list-heading").each(function(){n(this).removeClass("shifted").css("left","")})},n.fn.repeater.Constructor.prototype.list_setSelectedItems=function(t,i){function c(i){f=n(this);o=f.data("item_data")||{};o[t[r].property]===t[r].value&&h(f,t[r].selected,i)}function h(n,t,r){var f;t=t!==undefined?t:!0;t?(i||e==="multi"||u.list_clearSelectedItems(),n.hasClass("selected")||(n.addClass("selected"),(u.viewOptions.list_frozenColumns||u.viewOptions.list_selectable==="multi")&&(f=u.$element.find(".frozen-column-wrapper tr:nth-child("+(r+1)+")"),f.addClass("selected"),f.find(".repeater-select-checkbox").addClass("checked")),u.viewOptions.list_actions&&u.$element.find(".actions-column-wrapper tr:nth-child("+(r+1)+")").addClass("selected"),n.find("td:first").prepend('<div class="repeater-list-check"><span class="glyphicon glyphicon-ok"><\/span><\/div>'))):(u.viewOptions.list_frozenColumns&&(f=u.$element.find(".frozen-column-wrapper tr:nth-child("+(r+1)+")"),f.addClass("selected"),f.find(".repeater-select-checkbox").removeClass("checked")),u.viewOptions.list_actions&&u.$element.find(".actions-column-wrapper tr:nth-child("+(r+1)+")").removeClass("selected"),n.find(".repeater-list-check").remove(),n.removeClass("selected"))}var e=this.viewOptions.list_selectable,u=this,o,r,f,s;for(n.isArray(t)||(t=[t]),s=i===!0||e==="multi"?t.length:e?t.length>0?1:0:0,r=0;r<s;r++)t[r].index!==undefined?(f=this.$canvas.find(".repeater-list .repeater-list-wrapper > table tbody tr:nth-child("+(t[r].index+1)+")"),f.length>0&&h(f,t[r].selected,t[r].index)):t[r].property!==undefined&&t[r].value!==undefined&&this.$canvas.find(".repeater-list .repeater-list-wrapper > table tbody tr").each(c)},n.fn.repeater.Constructor.prototype.list_sizeHeadings=function(){var t=this.$element.find(".repeater-list table");t.find("thead th").each(function(){var t=n(this),i=t.find(".repeater-list-heading");i.css({height:t.outerHeight()});i.outerWidth(i.data("forced-width")||t.outerWidth())})},n.fn.repeater.Constructor.prototype.list_setFrozenColumns=function(){var h=this.$canvas.find(".table-frozen"),c=this.$element.find(".repeater-canvas"),o=this.$element.find(".repeater-list .repeater-list-wrapper > table"),l=this.$element.find(".repeater-list"),i=this.viewOptions.list_frozenColumns,a=this,s,t,u,r,f,e;this.viewOptions.list_selectable==="multi"&&(i=i+1,c.addClass("multi-select-enabled"));h.length<1&&(s=n('<div class="frozen-column-wrapper"><\/div>').insertBefore(o),t=o.clone().addClass("table-frozen"),t.find("th:not(:lt("+i+"))").remove(),t.find("td:not(:nth-child(n+0):nth-child(-n+"+i+"))").remove(),u=t.clone().removeClass("table-frozen"),u.find("tbody").remove(),r=n('<div class="frozen-thead-wrapper"><\/div>').append(u),f=r.find('th input[type="checkbox"]'),f.attr("id",f.attr("id")+"_cloned"),e=r.find("th label"),e.attr("for",e.attr("for")+"_cloned"),s.append(t),l.append(r),this.$canvas.addClass("frozen-enabled"));this.list_sizeFrozenColumns();n(".frozen-thead-wrapper .repeater-list-heading").on("click",function(){var t=n(this).parent("th").index();t=t+1;a.$element.find(".repeater-list-wrapper > table thead th:nth-child("+t+") .repeater-list-heading")[0].click()})},n.fn.repeater.Constructor.prototype.list_positionColumns=function(){var n=this.$element.find(".repeater-canvas"),i=n.scrollTop(),t=n.scrollLeft(),r=this.viewOptions.list_frozenColumns||this.viewOptions.list_selectable==="multi",u=this.viewOptions.list_actions,f=this.$element.find(".repeater-canvas").outerWidth(),e=this.$element.find(".repeater-list .repeater-list-wrapper > table").outerWidth(),o=this.$element.find(".table-actions")?this.$element.find(".table-actions").outerWidth():0,s=e-(f-o)>=t;i>0?n.find(".repeater-list-heading").css("top",i):n.find(".repeater-list-heading").css("top","0");t>0?(r&&(n.find(".frozen-thead-wrapper").css("left",t),n.find(".frozen-column-wrapper").css("left",t)),u&&s&&(n.find(".actions-thead-wrapper").css("right",-t),n.find(".actions-column-wrapper").css("right",-t))):(r&&(n.find(".frozen-thead-wrapper").css("left","0"),n.find(".frozen-column-wrapper").css("left","0")),u&&(n.find(".actions-thead-wrapper").css("right","0"),n.find(".actions-column-wrapper").css("right","0")))},n.fn.repeater.Constructor.prototype.list_createItemActions=function(){for(var o="",i=this,h=this.$element.find(".repeater-list .repeater-list-wrapper > table"),v=this.$canvas.find(".table-actions"),u,c,f,l,t,e,a,r=0,s=this.viewOptions.list_actions.items.length;r<s;r++)u=this.viewOptions.list_actions.items[r],c=u.html,o+='<li><a href="#" data-action="'+u.name+'" class="action-item"> '+c+"<\/a><\/li>";f='<div class="btn-group"><button type="button" class="btn btn-xs btn-default dropdown-toggle repeater-actions-button" data-toggle="dropdown" data-flip="auto" aria-expanded="false"><span class="caret"><\/span><\/button><ul class="dropdown-menu dropdown-menu-right" role="menu">'+o+"<\/ul><\/div>";v.length<1&&(l=n('<div class="actions-column-wrapper" style="width: '+this.list_actions_width+'px"><\/div>').insertBefore(h),t=h.clone().addClass("table-actions"),t.find("th:not(:last-child)").remove(),t.find("tr td:not(:last-child)").remove(),this.viewOptions.list_selectable==="multi"||this.viewOptions.list_selectable==="action"?(t.find("thead tr").html('<th><div class="repeater-list-heading">'+f+"<\/div><\/th>"),this.viewOptions.list_selectable!=="action"&&t.find("thead .btn").attr("disabled","disabled")):(e=this.viewOptions.list_actions.label||'<span class="actions-hidden">a<\/span>',t.find("thead tr").addClass("empty-heading").html("<th>"+e+'<div class="repeater-list-heading">'+e+"<\/div><\/th>")),a=t.find("td"),a.each(function(t){n(this).html(f);n(this).find("a").attr("data-row",parseInt([t])+1)}),l.append(t),this.$canvas.addClass("actions-enabled"));this.list_sizeActionsTable();this.$element.find(".table-actions tbody .action-item").on("click",function(t){if(!i.isDisabled){var r=n(this).data("action"),u=n(this).data("row"),f={actionName:r,rows:[u]};i.list_getActionItems(f,t)}});this.$element.find(".table-actions thead .action-item").on("click",function(t){if(!i.isDisabled){var f=n(this).data("action"),r={actionName:f,rows:[]},u=".repeater-list-wrapper > table .selected";i.viewOptions.list_selectable==="action"&&(u=".repeater-list-wrapper > table tr");i.$element.find(u).each(function(){var t=n(this).index();t=t+1;r.rows.push(t)});i.list_getActionItems(r,t)}})},n.fn.repeater.Constructor.prototype.list_getActionItems=function(t,i){for(var r=[],e=n.grep(this.viewOptions.list_actions.items,function(n){return n.name===t.actionName})[0],f,o,u=0;u<t.rows.length;u++)f=this.$canvas.find(".repeater-list-wrapper > table tbody tr:nth-child("+t.rows[u]+")"),r.push({item:f,rowData:f.data("item_data")});r.length===1&&(r=r[0]);e.clickAction&&(o=function(){},e.clickAction(r,o,i))},n.fn.repeater.Constructor.prototype.list_sizeActionsTable=function(){var i=this.$element.find(".repeater-list table.table-actions"),t=i.find("thead tr th"),r=this.$element.find(".repeater-list-wrapper > table");t.outerHeight(r.find("thead tr th").outerHeight());t.find(".repeater-list-heading").outerHeight(t.outerHeight());i.find("tbody tr td:first-child").each(function(t){n(this).outerHeight(r.find("tbody tr:eq("+t+") td").outerHeight())})},n.fn.repeater.Constructor.prototype.list_sizeFrozenColumns=function(){var t=this.$element.find(".repeater-list .repeater-list-wrapper > table"),i;this.$element.find(".repeater-list table.table-frozen tr").each(function(i){n(this).height(t.find("tr:eq("+i+")").height())});i=t.find("td:eq(0)").outerWidth();this.$element.find(".frozen-column-wrapper, .frozen-thead-wrapper").width(i)},n.fn.repeater.Constructor.prototype.list_frozenOptionsInitialize=function(){function e(n){t.list_revertingCheckbox=!0;n.checkbox("toggle");delete t.list_revertingCheckbox}var r=this.$element.find(".frozen-column-wrapper .checkbox-inline"),f=this.$element.find(".repeater-list table"),t=this,u,i;this.$element.find("tr.selectable").on("mouseover mouseleave",function(t){var i=n(this).index();i=i+1;t.type==="mouseover"?f.find("tbody tr:nth-child("+i+")").addClass("hovered"):f.find("tbody tr:nth-child("+i+")").removeClass("hovered")});r.checkbox();u=this.$element.find(".table-frozen tbody .checkbox-inline");i=this.$element.find(".frozen-thead-wrapper thead .checkbox-inline input");u.on("change",function(r){var f,o;r.preventDefault();t.list_revertingCheckbox||(t.isDisabled?e(n(r.currentTarget)):(f=n(this).attr("data-row"),f=parseInt(f)+1,t.$element.find(".repeater-list-wrapper > table tbody tr:nth-child("+f+")").click(),o=t.$element.find(".table-frozen tbody .checkbox-inline.checked").length,o===0?(i.prop("checked",!1),i.prop("indeterminate",!1)):o===u.length?(i.prop("checked",!0),i.prop("indeterminate",!1)):(i.prop("checked",!1),i.prop("indeterminate",!0))))});i.on("change",function(i){t.list_revertingCheckbox||(t.isDisabled?e(n(i.currentTarget)):n(this).is(":checked")?(t.$element.find(".repeater-list-wrapper > table tbody tr:not(.selected)").click(),t.$element.trigger("selected.fu.repeaterList",r)):(t.$element.find(".repeater-list-wrapper > table tbody tr.selected").click(),t.$element.trigger("deselected.fu.repeaterList",r)))})},n.fn.repeater.defaults=n.extend({},n.fn.repeater.defaults,{list_columnRendered:null,list_columnSizing:!0,list_columnSyncing:!0,list_highlightSortedColumn:!0,list_infiniteScroll:!1,list_noItemsHTML:"no items found",list_selectable:!1,list_sortClearing:!1,list_rowRendered:null,list_frozenColumns:0,list_actions:!1}),n.fn.repeater.viewTypes.list={cleared:function(){this.viewOptions.list_columnSyncing&&this.list_sizeHeadings()},dataOptions:function(n){return this.list_sortDirection&&(n.sortDirection=this.list_sortDirection),this.list_sortProperty&&(n.sortProperty=this.list_sortProperty),n},enabled:function(n){this.viewOptions.list_actions&&(n.status?(this.$canvas.find(".repeater-actions-button").removeAttr("disabled"),i.call(this)):this.$canvas.find(".repeater-actions-button").attr("disabled","disabled"))},initialize:function(n,t){this.list_sortDirection=null;this.list_sortProperty=null;this.list_specialBrowserClass=h();this.list_actions_width=this.viewOptions.list_actions.width!==undefined?this.viewOptions.list_actions.width:37;this.list_noItems=!1;t()},resize:function(){t.call(this,this.$element.find(".repeater-list-wrapper > table thead tr"));this.viewOptions.list_actions&&this.list_sizeActionsTable();(this.viewOptions.list_frozenColumns||this.viewOptions.list_selectable==="multi")&&this.list_sizeFrozenColumns();this.viewOptions.list_columnSyncing&&this.list_sizeHeadings()},selected:function(){var n=this.viewOptions.list_infiniteScroll,t;this.list_firstRender=!0;this.$loader.addClass("noHeader");n&&(t=typeof n=="object"?n:{},this.infiniteScrolling(!0,t))},before:function(t){var r=t.container.find(".repeater-list"),i=this,u;if(this.list_noItems=t.data.count>0?!1:!0,r.length<1){r=n('<div class="repeater-list '+this.list_specialBrowserClass+'" data-preserve="shallow"><div class="repeater-list-wrapper" data-infinite="true" data-preserve="shallow"><table aria-readonly="true" class="table" data-preserve="shallow" role="grid"><\/table><\/div><\/div>');r.find(".repeater-list-wrapper").on("scroll.fu.repeaterList",function(){i.viewOptions.list_columnSyncing&&i.list_positionHeadings()});if(i.viewOptions.list_frozenColumns||i.viewOptions.list_actions||i.viewOptions.list_selectable==="multi")t.container.on("scroll.fu.repeaterList",function(){i.list_positionColumns()});t.container.append(r)}return t.container.removeClass("actions-enabled actions-enabled multi-select-enabled"),u=r.find("table"),s.call(this,u,t.data),o.call(this,u,t.data),!1},renderItem:function(n){return e.call(this,n.container,n.subset,n.index),!1},after:function(){var n;return(this.viewOptions.list_frozenColumns||this.viewOptions.list_selectable==="multi")&&!this.list_noItems&&this.list_setFrozenColumns(),this.viewOptions.list_actions&&!this.list_noItems&&(this.list_createItemActions(),this.list_sizeActionsTable()),(this.viewOptions.list_frozenColumns||this.viewOptions.list_actions||this.viewOptions.list_selectable==="multi")&&!this.list_noItems&&(this.list_positionColumns(),this.list_frozenOptionsInitialize()),this.viewOptions.list_columnSyncing&&(this.list_sizeHeadings(),this.list_positionHeadings()),n=this.$canvas.find(".repeater-list-wrapper > table .repeater-list-heading.sorted"),n.length>0&&this.list_highlightColumn(n.data("fu_item_index")),!1}})}(n),function(n){function t(t,i){function u(){var e,u,f;u=i.indexOf("{{");e=i.indexOf("}}",u+2);u>-1&&e>-1?(f=n.trim(i.substring(u+2,e)),f=t[f]!==undefined?t[f]:"",i=i.substring(0,u)+f+i.substring(e+2)):r=!0}for(var r=!1;!r&&i.search("{{")>=0;)u(i);return i}n.fn.repeater&&(n.fn.repeater.Constructor.prototype.thumbnail_clearSelectedItems=function(){this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").removeClass("selected")},n.fn.repeater.Constructor.prototype.thumbnail_getSelectedItems=function(){var t=[];return this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){t.push(n(this))}),t},n.fn.repeater.Constructor.prototype.thumbnail_setSelectedItems=function(t,i){function c(){if(e===t[r].index)return u=n(this),!1;e++}function l(){u=n(this);u.is(t[r].selector)&&s(u,t[r].selected)}function s(n,t){t=t!==undefined?t:!0;t?(i||f==="multi"||h.thumbnail_clearSelectedItems(),n.addClass("selected")):n.removeClass("selected")}var f=this.viewOptions.thumbnail_selectable,h=this,r,u,o,e;for(n.isArray(t)||(t=[t]),o=i===!0||f==="multi"?t.length:f?t.length>0?1:0:0,r=0;r<o;r++)t[r].index!==undefined?(u=n(),e=0,this.$canvas.find(".repeater-thumbnail-cont .selectable").each(c),u.length>0&&s(u,t[r].selected)):t[r].selector&&this.$canvas.find(".repeater-thumbnail-cont .selectable").each(l)},n.fn.repeater.defaults=n.extend({},n.fn.repeater.defaults,{thumbnail_alignment:"left",thumbnail_infiniteScroll:!1,thumbnail_itemRendered:null,thumbnail_noItemsHTML:"no items found",thumbnail_selectable:!1,thumbnail_template:'<div class="thumbnail repeater-thumbnail"><img height="75" src="{{src}}" width="65"><span>{{name}}<\/span><\/div>'}),n.fn.repeater.viewTypes.thumbnail={selected:function(){var n=this.viewOptions.thumbnail_infiniteScroll,t;n&&(t=typeof n=="object"?n:{},this.infiniteScrolling(!0,t))},before:function(t){var i=this.viewOptions.thumbnail_alignment,r=this.$canvas.find(".repeater-thumbnail-cont"),e=t.data,u={},f,o;return r.length<1?(r=n('<div class="clearfix repeater-thumbnail-cont" data-container="true" data-infinite="true" data-preserve="shallow"><\/div>'),i&&i!=="none"?(o={center:1,justify:1,left:1,right:1},i=o[i]?i:"justify",r.addClass("align-"+i),this.thumbnail_injectSpacers=!0):this.thumbnail_injectSpacers=!1,u.item=r):u.action="none",e.items&&e.items.length<1?(f=n('<div class="empty"><\/div>'),f.append(this.viewOptions.thumbnail_noItemsHTML),r.append(f)):r.find(".empty:first").remove(),u},renderItem:function(i){var e=this.viewOptions.thumbnail_selectable,f="selected",u=this,r=n(t(i.subset[i.index],this.viewOptions.thumbnail_template));if(r.data("item_data",i.data.items[i.index]),e){r.addClass("selectable");r.on("click",function(){u.isDisabled||(r.hasClass(f)?(r.removeClass(f),u.$element.trigger("deselected.fu.repeaterThumbnail",r)):(e!=="multi"&&u.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){var t=n(this);t.removeClass(f);u.$element.trigger("deselected.fu.repeaterThumbnail",t)}),r.addClass(f),u.$element.trigger("selected.fu.repeaterThumbnail",r)))})}return i.container.append(r),this.thumbnail_injectSpacers&&r.after('<span class="spacer">&nbsp;<\/span>'),this.viewOptions.thumbnail_itemRendered&&this.viewOptions.thumbnail_itemRendered({container:i.container,item:r,itemData:i.subset[i.index]},function(){}),!1}})}(n),function(n){var s=n.fn.scheduler,t=function(t,i){var u=this,r;this.$element=n(t);this.options=n.extend({},n.fn.scheduler.defaults,i);this.$startDate=this.$element.find(".start-datetime .start-date");this.$startTime=this.$element.find(".start-datetime .start-time");this.$timeZone=this.$element.find(".timezone-container .timezone");this.$repeatIntervalPanel=this.$element.find(".repeat-every-panel");this.$repeatIntervalSelect=this.$element.find(".repeat-options");this.$repeatIntervalSpinbox=this.$element.find(".repeat-every");this.$repeatIntervalTxt=this.$element.find(".repeat-every-text");this.$end=this.$element.find(".repeat-end");this.$endSelect=this.$end.find(".end-options");this.$endAfter=this.$end.find(".end-after");this.$endDate=this.$end.find(".end-on-date");this.$recurrencePanels=this.$element.find(".repeat-panel");this.$repeatIntervalSelect.selectlist();this.$element.find(".selectlist").selectlist();this.$startDate.datepicker(this.options.startDateOptions);r=typeof this.options.startDateChanged=="function"?this.options.startDateChanged:this._guessEndDate;this.$startDate.on("change changed.fu.datepicker dateClicked.fu.datepicker",n.proxy(r,this));this.$startTime.combobox();this.$startTime.find("input").val()===""&&this.$startTime.combobox("selectByIndex",0);this.$repeatIntervalSpinbox.find("input").val()==="0"?this.$repeatIntervalSpinbox.spinbox({value:1,min:1,limitToStep:!0}):this.$repeatIntervalSpinbox.spinbox({min:1,limitToStep:!0});this.$endAfter.spinbox({value:1,min:1,limitToStep:!0});this.$endDate.datepicker(this.options.endDateOptions);this.$element.find(".radio-custom").radio();this.$repeatIntervalSelect.on("changed.fu.selectlist",n.proxy(this.repeatIntervalSelectChanged,this));this.$endSelect.on("changed.fu.selectlist",n.proxy(this.endSelectChanged,this));this.$element.find(".repeat-days-of-the-week .btn-group .btn").on("change.fu.scheduler",function(n,t){u.changed(n,t,!0)});this.$element.find(".combobox").on("changed.fu.combobox",n.proxy(this.changed,this));this.$element.find(".datepicker").on("changed.fu.datepicker",n.proxy(this.changed,this));this.$element.find(".datepicker").on("dateClicked.fu.datepicker",n.proxy(this.changed,this));this.$element.find(".selectlist").on("changed.fu.selectlist",n.proxy(this.changed,this));this.$element.find(".spinbox").on("changed.fu.spinbox",n.proxy(this.changed,this));this.$element.find(".repeat-monthly .radio-custom, .repeat-yearly .radio-custom").on("change.fu.scheduler",n.proxy(this.changed,this))},r=function(n,t){var r="",i;return r+=n.getFullYear(),r+=t,i=n.getMonth()+1,r+=i<10?"0"+i:i,r+=t,i=n.getDate(),r+(i<10?"0"+i:i)},u=1e3,f=u*60,e=f*60,o=e*24,i=o*7,h=i*5,c=i*52,l={secondly:u,minutely:f,hourly:e,daily:o,weekly:i,monthly:h,yearly:c},a=function(n,t,i,r){return new Date(n.getTime()+l[i]*r)};t.prototype={constructor:t,destroy:function(){var t;return this.$element.find("input").each(function(){n(this).attr("value",n(this).val())}),this.$element.find(".datepicker .calendar").empty(),t=this.$element[0].outerHTML,this.$element.find(".combobox").combobox("destroy"),this.$element.find(".datepicker").datepicker("destroy"),this.$element.find(".selectlist").selectlist("destroy"),this.$element.find(".spinbox").spinbox("destroy"),this.$element.find(".radio-custom").radio("destroy"),this.$element.remove(),t},changed:function(t,i,r){r||t.stopPropagation();this.$element.trigger("changed.fu.scheduler",{data:i!==undefined?i:n(t.currentTarget).data(),originalEvent:t,value:this.getValue()})},disable:function(){this.toggleState("disable")},enable:function(){this.toggleState("enable")},setUtcTime:function(n,t,i){var o=n.split("-"),f=t.split(":"),r=new Date(Date.UTC(o[0],o[1]-1,o[2],f[0],f[1],f[2]?f[2]:0)),u,s,e,h;if(i==="Z")r.setUTCHours(r.getUTCHours()+0);else if(u=[],u[0]="(.)",u[1]=".*?",u[2]="\\d",u[3]=".*?",u[4]="(\\d)",s=new RegExp(u.join(""),["i"]),e=s.exec(i),e!==null){var c=e[1],l=e[2],a=c==="+"?1:-1;r.setUTCHours(r.getUTCHours()+a*parseInt(l,10))}return h=r.getTimezoneOffset(),r.setMinutes(h),r},endSelectChanged:function(n,t){var r,i;t?i=t.value:(r=this.$endSelect.selectlist("selectedItem"),i=r.value);this.$endAfter.parent().addClass("hidden");this.$endAfter.parent().attr("aria-hidden","true");this.$endDate.parent().addClass("hidden");this.$endDate.parent().attr("aria-hidden","true");i==="after"?(this.$endAfter.parent().removeClass("hide hidden"),this.$endAfter.parent().attr("aria-hidden","false")):i==="date"&&(this.$endDate.parent().removeClass("hide hidden"),this.$endDate.parent().attr("aria-hidden","false"))},_guessEndDate:function(){var n=this.$repeatIntervalSelect.selectlist("selectedItem").value,t=new Date(this.$endDate.datepicker("getDate")),r=new Date(this.$startDate.datepicker("getDate")),i=this.$repeatIntervalSpinbox.find("input").val();n!=="none"&&t<=r&&(this.$repeatIntervalSpinbox.is(":visible")||(i=1),n==="weekdays"&&(i=1,n="weekly"),t=a(r,t,n,i),this.$endDate.datepicker("setDate",t))},getValue:function(){var o=this.$repeatIntervalSpinbox.spinbox("value"),t="",u=this.$repeatIntervalSelect.selectlist("selectedItem").value,i,h,c,f,p,w,l,a,e,s,y,v;return this.$startTime.combobox("selectedItem").value?(i=this.$startTime.combobox("selectedItem").value,i=i.toLowerCase()):i=this.$startTime.combobox("selectedItem").text.toLowerCase(),h=this.$timeZone.selectlist("selectedItem"),e=""+r(this.$startDate.datepicker("getDate"),"-"),e+="T",p=i.search("am")>=0,w=i.search("pm")>=0,i=n.trim(i.replace(/am/g,"").replace(/pm/g,"")).split(":"),i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10),p&&i[0]>11?i[0]=0:w&&i[0]<12&&(i[0]+=12),e+=i[0]<10?"0"+i[0]:i[0],e+=":",e+=i[1]<10?"0"+i[1]:i[1],e+=h.offset==="+00:00"?"Z":h.offset,u==="none"?t="FREQ=DAILY;INTERVAL=1;COUNT=1;":u==="secondly"?t="FREQ=SECONDLY;"+("INTERVAL="+o+";"):u==="minutely"?t="FREQ=MINUTELY;"+("INTERVAL="+o+";"):u==="hourly"?t="FREQ=HOURLY;"+("INTERVAL="+o+";"):u==="daily"?(t+="FREQ=DAILY;",t+="INTERVAL="+o+";"):u==="weekdays"?(t+="FREQ=WEEKLY;",t+="BYDAY=MO,TU,WE,TH,FR;",t+="INTERVAL=1;"):u==="weekly"?(f=[],this.$element.find(".repeat-days-of-the-week .btn-group input:checked").each(function(){f.push(n(this).data().value)}),t+="FREQ=WEEKLY;",t+="BYDAY="+f.join(",")+";",t+="INTERVAL="+o+";"):u==="monthly"?(t+="FREQ=MONTHLY;",t+="INTERVAL="+o+";",s=this.$element.find("input[name=repeat-monthly]:checked").val(),s==="bymonthday"?(c=parseInt(this.$element.find(".repeat-monthly-date .selectlist").selectlist("selectedItem").text,10),t+="BYMONTHDAY="+c+";"):s==="bysetpos"&&(f=this.$element.find(".repeat-monthly-day .month-days").selectlist("selectedItem").value,a=this.$element.find(".repeat-monthly-day .month-day-pos").selectlist("selectedItem").value,t+="BYDAY="+f+";",t+="BYSETPOS="+a+";")):u==="yearly"&&(t+="FREQ=YEARLY;",s=this.$element.find("input[name=repeat-yearly]:checked").val(),s==="bymonthday"?(l=this.$element.find(".repeat-yearly-date .year-month").selectlist("selectedItem").value,c=this.$element.find(".repeat-yearly-date .year-month-day").selectlist("selectedItem").text,t+="BYMONTH="+l+";",t+="BYMONTHDAY="+c+";"):s==="bysetpos"&&(f=this.$element.find(".repeat-yearly-day .year-month-days").selectlist("selectedItem").value,a=this.$element.find(".repeat-yearly-day .year-month-day-pos").selectlist("selectedItem").value,l=this.$element.find(".repeat-yearly-day .year-month").selectlist("selectedItem").value,t+="BYDAY="+f+";",t+="BYSETPOS="+a+";",t+="BYMONTH="+l+";")),y=this.$endSelect.selectlist("selectedItem").value,v="",u!=="none"&&(y==="after"?v="COUNT="+this.$endAfter.spinbox("value")+";":y==="date"&&(v="UNTIL="+r(this.$endDate.datepicker("getDate"),"")+";")),t+=v,t=t.substring(t.length-1)===";"?t.substring(0,t.length-1):t,{startDateTime:e,timeZone:h,recurrencePattern:t}},repeatIntervalSelectChanged:function(n,t){var r,i,u;t?(i=t.value,u=t.text):(r=this.$repeatIntervalSelect.selectlist("selectedItem"),i=r.value||"",u=r.text||"");this.$repeatIntervalTxt.text(u);switch(i.toLowerCase()){case"hourly":case"daily":case"weekly":case"monthly":this.$repeatIntervalPanel.removeClass("hide hidden");this.$repeatIntervalPanel.attr("aria-hidden","false");break;default:this.$repeatIntervalPanel.addClass("hidden");this.$repeatIntervalPanel.attr("aria-hidden","true")}this.$recurrencePanels.addClass("hidden");this.$recurrencePanels.attr("aria-hidden","true");this.$element.find(".repeat-"+i).removeClass("hide hidden");this.$element.find(".repeat-"+i).attr("aria-hidden","false");i==="none"?(this.$end.addClass("hidden"),this.$end.attr("aria-hidden","true")):(this.$end.removeClass("hide hidden"),this.$end.attr("aria-hidden","false"));this._guessEndDate()},_parseAndSetRecurrencePattern:function(n,t){for(var i={},u=0,r="",c,s,e,f,l=n.toUpperCase().split(";"),a,o,h,v,u=0;u<l.length;u++)l[u]!==""&&(r=l[u].split("="),i[r[0]]=r[1]);if(i.FREQ==="DAILY")r=i.BYDAY==="MO,TU,WE,TH,FR"?"weekdays":i.INTERVAL==="1"&&i.COUNT==="1"?"none":"daily";else if(i.FREQ==="SECONDLY")r="secondly";else if(i.FREQ==="MINUTELY")r="minutely";else if(i.FREQ==="HOURLY")r="hourly";else if(i.FREQ==="WEEKLY"){if(r="weekly",i.BYDAY)if(i.BYDAY==="MO,TU,WE,TH,FR")r="weekdays";else for(a=this.$element.find(".repeat-days-of-the-week .btn-group"),a.find("label").removeClass("active"),c=i.BYDAY.split(","),u=0;u<c.length;u++)a.find('input[data-value="'+c[u]+'"]').prop("checked",!0).parent().addClass("active")}else i.FREQ==="MONTHLY"?(this.$element.find(".repeat-monthly input").removeAttr("checked").removeClass("checked"),this.$element.find(".repeat-monthly label.radio-custom").removeClass("checked"),i.BYMONTHDAY?(s=this.$element.find(".repeat-monthly-date"),s.find("input").addClass("checked").prop("checked",!0),s.find("label.radio-custom").addClass("checked"),s.find(".selectlist").selectlist("selectByValue",i.BYMONTHDAY)):i.BYDAY&&(o=this.$element.find(".repeat-monthly-day"),o.find("input").addClass("checked").prop("checked",!0),o.find("label.radio-custom").addClass("checked"),i.BYSETPOS&&o.find(".month-day-pos").selectlist("selectByValue",i.BYSETPOS),o.find(".month-days").selectlist("selectByValue",i.BYDAY)),r="monthly"):i.FREQ==="YEARLY"?(this.$element.find(".repeat-yearly input").removeAttr("checked").removeClass("checked"),this.$element.find(".repeat-yearly label.radio-custom").removeClass("checked"),i.BYMONTHDAY?(e=this.$element.find(".repeat-yearly-date"),e.find("input").addClass("checked").prop("checked",!0),e.find("label.radio-custom").addClass("checked"),i.BYMONTH&&e.find(".year-month").selectlist("selectByValue",i.BYMONTH),e.find(".year-month-day").selectlist("selectByValue",i.BYMONTHDAY)):i.BYSETPOS&&(f=this.$element.find(".repeat-yearly-day"),f.find("input").addClass("checked").prop("checked",!0),f.find("label.radio-custom").addClass("checked"),f.find(".year-month-day-pos").selectlist("selectByValue",i.BYSETPOS),i.BYDAY&&f.find(".year-month-days").selectlist("selectByValue",i.BYDAY),i.BYMONTH&&f.find(".year-month").selectlist("selectByValue",i.BYMONTH)),r="yearly"):r="none";if(i.COUNT)this.$endAfter.spinbox("value",parseInt(i.COUNT,10)),this.$endSelect.selectlist("selectByValue","after");else if(i.UNTIL){i.UNTIL.length===8&&(h=i.UNTIL.split(""),h.splice(4,0,"-"),h.splice(7,0,"-"),v=h.join(""));var y=this.$timeZone.selectlist("selectedItem"),p=y.offset==="+00:00"?"Z":y.offset,w=this.setUtcTime(v,t.time24HourFormat,p);this.$endDate.datepicker("setDate",w);this.$endSelect.selectlist("selectByValue","date")}else this.$endSelect.selectlist("selectByValue","never");this.endSelectChanged();i.INTERVAL&&this.$repeatIntervalSpinbox.spinbox("value",parseInt(i.INTERVAL,10));this.$repeatIntervalSelect.selectlist("selectByValue",r);this.repeatIntervalSelectChanged()},_parseStartDateTime:function(t){var i={},r,u,f;return i.time24HourFormat=t.split("+")[0].split("-")[0],i.timeZoneOffset=t.search(/\+/)>-1?"+"+n.trim(t.split("+")[1]):t.search(/\-/)>-1?"-"+n.trim(t.split("-")[1]):"+00:00",i.time24HourFormatSplit=i.time24HourFormat.split(":"),r=parseInt(i.time24HourFormatSplit[0],10),u=i.time24HourFormatSplit[1]?parseInt(i.time24HourFormatSplit[1].split("+")[0].split("-")[0].split("Z")[0],10):0,f=r<12?"AM":"PM",r===0?r=12:r>12&&(r-=12),u=u<10?"0"+u:u,i.time12HourFormat=r+":"+u,i.time12HourFormatWithPeriod=r+":"+u+" "+f,i},_parseTimeZone:function(t,i){return i.timeZoneQuerySelector="",t.timeZone?(typeof t.timeZone=="string"?i.timeZoneQuerySelector+='li[data-name="'+t.timeZone+'"]':n.each(t.timeZone,function(n,t){i.timeZoneQuerySelector+="li[data-"+n+'="'+t+'"]'}),i.timeZoneOffset=t.timeZone.offset):t.startDateTime?(i.timeZoneOffset=i.timeZoneOffset==="+00:00"?"Z":i.timeZoneOffset,i.timeZoneQuerySelector+='li[data-offset="'+i.timeZoneOffset+'"]'):i.timeZoneOffset="Z",i.timeZoneOffset},_setTimeUI:function(n){this.$startTime.find("input").val(n);this.$startTime.combobox("selectByText",n)},_setTimeZoneUI:function(n){this.$timeZone.selectlist("selectBySelector",n)},setValue:function(n){var t={},r,u,f,e,i;n.startDateTime?(r=n.startDateTime.split("T"),u=r[0],f=r[1],f?(t=this._parseStartDateTime(f),this._setTimeUI(t.time12HourFormatWithPeriod)):(t.time12HourFormat="00:00",t.time24HourFormat="00:00")):(t.time12HourFormat="00:00",t.time24HourFormat="00:00",i=this.$startDate.datepicker("getDate"),u=i.getFullYear()+"-"+i.getMonth()+"-"+i.getDate());this._parseTimeZone(n,t);t.timeZoneQuerySelector&&this._setTimeZoneUI(t.timeZoneQuerySelector);n.recurrencePattern&&this._parseAndSetRecurrencePattern(n.recurrencePattern,t);e=this.setUtcTime(u,t.time24HourFormat,t.timeZoneOffset);this.$startDate.datepicker("setDate",e)},toggleState:function(n){this.$element.find(".combobox").combobox(n);this.$element.find(".datepicker").datepicker(n);this.$element.find(".selectlist").selectlist(n);this.$element.find(".spinbox").spinbox(n);this.$element.find(".radio-custom").radio(n);n=n==="disable"?"addClass":"removeClass";this.$element.find(".repeat-days-of-the-week .btn-group")[n]("disabled")},value:function(n){return n?this.setValue(n):this.getValue()}};n.fn.scheduler=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.scheduler"),o=typeof i=="object"&&i;f||e.data("fu.scheduler",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.scheduler.defaults={};n.fn.scheduler.Constructor=t;n.fn.scheduler.noConflict=function(){return n.fn.scheduler=s,this};n(document).on("mousedown.fu.scheduler.data-api","[data-initialize=scheduler]",function(t){var i=n(t.target).closest(".scheduler");i.data("fu.scheduler")||i.scheduler(i.data())});n(function(){n("[data-initialize=scheduler]").each(function(){var t=n(this);t.data("scheduler")||t.scheduler(t.data())})})}(n),function(n){var u=n.fn.picker,t=function(t,i){var r=this;this.$element=n(t);this.options=n.extend({},n.fn.picker.defaults,i);this.$accept=this.$element.find(".picker-accept");this.$cancel=this.$element.find(".picker-cancel");this.$trigger=this.$element.find(".picker-trigger");this.$footer=this.$element.find(".picker-footer");this.$header=this.$element.find(".picker-header");this.$popup=this.$element.find(".picker-popup");this.$body=this.$element.find(".picker-body");this.clickStamp="_";this.isInput=this.$trigger.is("input");this.$trigger.on("keydown.fu.picker",n.proxy(this.keyComplete,this));this.$trigger.on("focus.fu.picker",n.proxy(function(t){(typeof t=="undefined"||n(t.target).is("input[type=text]"))&&n.proxy(this.show(),this)},this));this.$trigger.on("click.fu.picker",n.proxy(function(t){n(t.target).is("input[type=text]")?n.proxy(this.show(),this):n.proxy(this.toggle(),this)},this));this.$accept.on("click.fu.picker",n.proxy(this.complete,this,"accepted"));this.$cancel.on("click.fu.picker",function(n){n.preventDefault();r.complete("cancelled")})},i=function(t){var u=Math.max(document.documentElement.clientHeight,window.innerHeight||0),i=n(document).scrollTop(),r=t.$popup.offset(),f=r.top+t.$popup.outerHeight(!0);return f>u+i||r.top<i?!0:!1},f=function(n){n.$popup.css("visibility","hidden");r(n);i(n)&&(e(n),i(n)&&r(n));n.$popup.css("visibility","visible")},e=function(n){n.$popup.css("top",-n.$popup.outerHeight(!0)+"px")},r=function(n){n.$popup.css("top",n.$trigger.outerHeight(!0)+"px")};t.prototype={constructor:t,complete:function(n){var i=this.options[{accepted:"onAccept",cancelled:"onCancel",exited:"onExit"}[n]],t={contents:this.$body};i?(i(t),this.$element.trigger(n+".fu.picker",t)):(this.$element.trigger(n+".fu.picker",t),this.hide())},keyComplete:function(n){this.isInput&&n.keyCode===13?(this.complete("accepted"),this.$trigger.blur()):n.keyCode===27&&(this.complete("exited"),this.$trigger.blur())},destroy:function(){return this.$element.remove(),n(document).off("click.fu.picker.externalClick."+this.clickStamp),this.$element[0].outerHTML},disable:function(){this.$element.addClass("disabled");this.$trigger.attr("disabled","disabled")},enable:function(){this.$element.removeClass("disabled");this.$trigger.removeAttr("disabled")},toggle:function(){this.$element.hasClass("showing")?this.hide():this.show()},hide:function(){this.$element.hasClass("showing")&&(this.$element.removeClass("showing"),n(document).off("click.fu.picker.externalClick."+this.clickStamp),this.$element.trigger("hidden.fu.picker"))},externalClickListener:function(n,t){(t===!0||this.isExternalClick(n))&&this.complete("exited")},isExternalClick:function(t){var f=this.$element.get(0),r=this.options.externalClickExceptions||[],u=n(t.target),i,e;if(t.target===f||u.parents(".picker:first").get(0)===f)return!1;for(i=0,e=r.length;i<e;i++)if(u.is(r[i])||u.parents(r[i]).length>0)return!1;return!0},show:function(){var t;if(t=n(document).find(".picker.showing"),t.length>0){if(t.data("fu.picker")&&t.data("fu.picker").options.explicit)return;t.picker("externalClickListener",{},!0)}if(this.$element.addClass("showing"),f(this),this.$element.trigger("shown.fu.picker"),this.clickStamp=(new Date).getTime()+(Math.floor(Math.random()*100)+1),!this.options.explicit)n(document).on("click.fu.picker.externalClick."+this.clickStamp,n.proxy(this.externalClickListener,this))}};n.fn.picker=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.picker"),o=typeof i=="object"&&i;f||e.data("fu.picker",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.picker.defaults={onAccept:undefined,onCancel:undefined,onExit:undefined,externalClickExceptions:[],explicit:!1};n.fn.picker.Constructor=t;n.fn.picker.noConflict=function(){return n.fn.picker=u,this};n(document).on("focus.fu.picker.data-api","[data-initialize=picker]",function(t){var i=n(t.target).closest(".picker");i.data("fu.picker")||i.picker(i.data())});n(function(){n("[data-initialize=picker]").each(function(){var t=n(this);t.data("fu.picker")||t.picker(t.data())})})}(n)});
//# sourceMappingURL=fuelux.min.js.map
